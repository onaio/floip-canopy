<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<template encoding-version="1.2">
    <description></description>
    <groupId>c2cd8d7f-016b-1000-e281-17478a13fdb5</groupId>
    <name>flow_results</name>
    <snippet>
        <controllerServices>
            <id>6a898f0f-83bf-37b9-0000-000000000000</id>
            <parentGroupId>9cf71b0e-e4b5-3e3f-0000-000000000000</parentGroupId>
            <bundle>
                <artifact>nifi-dbcp-service-nar</artifact>
                <group>org.apache.nifi</group>
                <version>1.9.2</version>
            </bundle>
            <comments></comments>
            <descriptors>
                <entry>
                    <key>Database Connection URL</key>
                    <value>
                        <name>Database Connection URL</name>
                    </value>
                </entry>
                <entry>
                    <key>Database Driver Class Name</key>
                    <value>
                        <name>Database Driver Class Name</name>
                    </value>
                </entry>
                <entry>
                    <key>database-driver-locations</key>
                    <value>
                        <name>database-driver-locations</name>
                    </value>
                </entry>
                <entry>
                    <key>kerberos-credentials-service</key>
                    <value>
                        <identifiesControllerService>org.apache.nifi.kerberos.KerberosCredentialsService</identifiesControllerService>
                        <name>kerberos-credentials-service</name>
                    </value>
                </entry>
                <entry>
                    <key>Database User</key>
                    <value>
                        <name>Database User</name>
                    </value>
                </entry>
                <entry>
                    <key>Password</key>
                    <value>
                        <name>Password</name>
                    </value>
                </entry>
                <entry>
                    <key>Max Wait Time</key>
                    <value>
                        <name>Max Wait Time</name>
                    </value>
                </entry>
                <entry>
                    <key>Max Total Connections</key>
                    <value>
                        <name>Max Total Connections</name>
                    </value>
                </entry>
                <entry>
                    <key>Validation-query</key>
                    <value>
                        <name>Validation-query</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-min-idle-conns</key>
                    <value>
                        <name>dbcp-min-idle-conns</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-max-idle-conns</key>
                    <value>
                        <name>dbcp-max-idle-conns</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-max-conn-lifetime</key>
                    <value>
                        <name>dbcp-max-conn-lifetime</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-time-between-eviction-runs</key>
                    <value>
                        <name>dbcp-time-between-eviction-runs</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-min-evictable-idle-time</key>
                    <value>
                        <name>dbcp-min-evictable-idle-time</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-soft-min-evictable-idle-time</key>
                    <value>
                        <name>dbcp-soft-min-evictable-idle-time</name>
                    </value>
                </entry>
            </descriptors>
            <name>DBCPConnectionPool</name>
            <persistsState>false</persistsState>
            <properties>
                <entry>
                    <key>Database Connection URL</key>
                    <value>jdbc:postgresql://db:5432/flow_results</value>
                </entry>
                <entry>
                    <key>Database Driver Class Name</key>
                    <value>org.postgresql.Driver</value>
                </entry>
                <entry>
                    <key>database-driver-locations</key>
                </entry>
                <entry>
                    <key>kerberos-credentials-service</key>
                </entry>
                <entry>
                    <key>Database User</key>
                    <value>admin</value>
                </entry>
                <entry>
                    <key>Password</key>
                </entry>
                <entry>
                    <key>Max Wait Time</key>
                    <value>500 millis</value>
                </entry>
                <entry>
                    <key>Max Total Connections</key>
                    <value>8</value>
                </entry>
                <entry>
                    <key>Validation-query</key>
                </entry>
                <entry>
                    <key>dbcp-min-idle-conns</key>
                    <value>0</value>
                </entry>
                <entry>
                    <key>dbcp-max-idle-conns</key>
                    <value>8</value>
                </entry>
                <entry>
                    <key>dbcp-max-conn-lifetime</key>
                    <value>-1</value>
                </entry>
                <entry>
                    <key>dbcp-time-between-eviction-runs</key>
                    <value>-1</value>
                </entry>
                <entry>
                    <key>dbcp-min-evictable-idle-time</key>
                    <value>30 mins</value>
                </entry>
                <entry>
                    <key>dbcp-soft-min-evictable-idle-time</key>
                    <value>-1</value>
                </entry>
            </properties>
            <state>ENABLED</state>
            <type>org.apache.nifi.dbcp.DBCPConnectionPool</type>
        </controllerServices>
        <processGroups>
            <id>f3ed7560-6a1d-3dbd-0000-000000000000</id>
            <parentGroupId>9cf71b0e-e4b5-3e3f-0000-000000000000</parentGroupId>
            <position>
                <x>0.0</x>
                <y>0.0</y>
            </position>
            <comments></comments>
            <contents>
                <connections>
                    <id>0c02578c-d817-3eea-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>10b6b4d8-d093-32f0-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>json_feed</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>26f2df61-c37a-33a5-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>1188b11d-8fe0-34dd-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>a75fad17-f73c-3964-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>matched</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>222936b3-b271-3842-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>2265307b-a75c-3a60-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>222936b3-b271-3842-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>split</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>1f1a9733-50c6-31b6-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>2ac0c84d-80e4-3d08-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>a4a8760e-5c56-3e1f-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>merged</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>19fdf37a-9a1e-35b9-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>3a02651b-7db7-375b-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>29c3f335-314b-37f7-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>a4a8760e-5c56-3e1f-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>564ecb2f-75e9-38bc-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
                        <id>15b98627-1685-36eb-0000-000000000000</id>
                        <type>INPUT_PORT</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>b51d81f0-227f-3d5d-0000-000000000000</groupId>
                        <id>1963e9cb-3f10-394b-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>6883c677-9c74-3803-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>554ddd26-af4e-3e42-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>failure</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>6141dc81-b918-3c96-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>6a6f6d23-9843-32db-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>38e3753d-3f42-31be-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>form_uuid</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>26f2df61-c37a-33a5-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>6b4ac758-1353-367c-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>6141dc81-b918-3c96-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>sql</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>032983a0-d856-34de-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>75f97802-21c1-3772-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <bends>
                        <x>965.0188285034404</x>
                        <y>504.10307025909424</y>
                    </bends>
                    <bends>
                        <x>964.6634818237529</x>
                        <y>551.8797960281372</y>
                    </bends>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>38e3753d-3f42-31be-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>Retry</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>38e3753d-3f42-31be-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>7a691d3c-bff5-365e-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
                        <id>15b98627-1685-36eb-0000-000000000000</id>
                        <type>INPUT_PORT</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
                        <id>0eec631c-dfe6-3120-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>7f99a503-eb90-3ec0-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>1000000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>9da2c687-fe4f-311b-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>6141dc81-b918-3c96-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>84a8d9f5-4b83-3dc6-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>26f2df61-c37a-33a5-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
                        <id>9a7ca685-4984-3a37-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>84bf40f2-b0c4-3526-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>1f1a9733-50c6-31b6-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>10b6b4d8-d093-32f0-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>86550bff-352f-3259-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>1f1a9733-50c6-31b6-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>Response</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>38e3753d-3f42-31be-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>86e942be-746a-3c11-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
                        <id>15b98627-1685-36eb-0000-000000000000</id>
                        <type>INPUT_PORT</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
                        <id>ca7fcfa6-e2ba-38d7-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>92144151-b9d9-3a9d-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <bends>
                        <x>368.5581732910381</x>
                        <y>1637.8831872940063</y>
                    </bends>
                    <bends>
                        <x>368.5581732910381</x>
                        <y>1674.8831872940063</y>
                    </bends>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>6141dc81-b918-3c96-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>retry</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>6141dc81-b918-3c96-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>b01d0760-3994-37e2-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>d297a8d9-e714-3d8e-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>29c3f335-314b-37f7-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>b16e366d-2411-3d72-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>d796bfa1-f61f-39ca-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>d297a8d9-e714-3d8e-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>b4f94241-3ce7-31c0-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>e8244832-e8c8-35be-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>split</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>d796bfa1-f61f-39ca-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>c7d063eb-4e92-33f3-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
                        <id>550d83c3-8f40-3e4f-0000-000000000000</id>
                        <type>INPUT_PORT</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>batch_pulls</selectedRelationships>
                    <selectedRelationships>webhook_data</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>a75fad17-f73c-3964-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>dd9850f7-09dc-36ce-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>032983a0-d856-34de-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>e8244832-e8c8-35be-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>ea34aa49-b81b-3db3-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>f3ed7560-6a1d-3dbd-0000-000000000000</groupId>
                        <id>19fdf37a-9a1e-35b9-0000-000000000000</id>
                        <type>PROCESSOR</type>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
                        <id>f06679c6-0b8d-3217-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <processGroups>
                    <id>3c212fa1-ef75-3709-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>472.4111548584209</x>
                        <y>3.0</y>
                    </position>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>462ebb14-8bf2-3681-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>00c0f8d3-d116-3557-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>006562b9-db85-3cf3-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>754c1e66-9582-3956-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>6266e4c3-1eda-31b2-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>Response</selectedRelationships>
                            <source>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>00c0f8d3-d116-3557-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>76bfd916-edb2-3da3-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <bends>
<x>-51.66450842205313</x>
<y>60.06931104864725</y>
                            </bends>
                            <bends>
<x>-50.66450842205313</x>
<y>105.06931104864725</y>
                            </bends>
                            <destination>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>00c0f8d3-d116-3557-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>Retry</selectedRelationships>
                            <source>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>00c0f8d3-d116-3557-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>8bb78054-1eff-30e9-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>006562b9-db85-3cf3-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>4d3b11a4-5a03-3c1d-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>cf529365-7056-35be-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>0eec631c-dfe6-3120-0000-000000000000</id>
<type>OUTPUT_PORT</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>3c212fa1-ef75-3709-0000-000000000000</groupId>
<id>6266e4c3-1eda-31b2-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <outputPorts>
                            <id>0eec631c-dfe6-3120-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <position>
<x>77.33542441100872</x>
<y>231.82702030222617</y>
                            </position>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>Form details</name>
                            <state>RUNNING</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>006562b9-db85-3cf3-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <position>
<x>563.1075863045094</x>
<y>-170.17292985711447</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Destination</key>
        <value>
            <name>Destination</name>
        </value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>
            <name>Return Type</name>
        </value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>
            <name>Path Not Found Behavior</name>
        </value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>
            <name>Null Value Representation</name>
        </value>
    </entry>
    <entry>
        <key>base_url</key>
        <value>
            <name>base_url</name>
        </value>
    </entry>
    <entry>
        <key>form_id</key>
        <value>
            <name>form_id</name>
        </value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>
            <name>table_name</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Destination</key>
        <value>flowfile-attribute</value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>auto-detect</value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>ignore</value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>empty string</value>
    </entry>
    <entry>
        <key>base_url</key>
        <value>$.base_url</value>
    </entry>
    <entry>
        <key>form_id</key>
        <value>$.form_id</value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>$.table_name</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>EvaluateJsonPath</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                        </processors>
                        <processors>
                            <id>00c0f8d3-d116-3557-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <position>
<x>62.33549157794687</x>
<y>14.06931104864725</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>HTTP Method</key>
        <value>
            <name>HTTP Method</name>
        </value>
    </entry>
    <entry>
        <key>Remote URL</key>
        <value>
            <name>Remote URL</name>
        </value>
    </entry>
    <entry>
        <key>SSL Context Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.ssl.SSLContextService</identifiesControllerService>
            <name>SSL Context Service</name>
        </value>
    </entry>
    <entry>
        <key>Connection Timeout</key>
        <value>
            <name>Connection Timeout</name>
        </value>
    </entry>
    <entry>
        <key>Read Timeout</key>
        <value>
            <name>Read Timeout</name>
        </value>
    </entry>
    <entry>
        <key>Include Date Header</key>
        <value>
            <name>Include Date Header</name>
        </value>
    </entry>
    <entry>
        <key>Follow Redirects</key>
        <value>
            <name>Follow Redirects</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Send</key>
        <value>
            <name>Attributes to Send</name>
        </value>
    </entry>
    <entry>
        <key>Basic Authentication Username</key>
        <value>
            <name>Basic Authentication Username</name>
        </value>
    </entry>
    <entry>
        <key>Basic Authentication Password</key>
        <value>
            <name>Basic Authentication Password</name>
        </value>
    </entry>
    <entry>
        <key>proxy-configuration-service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.proxy.ProxyConfigurationService</identifiesControllerService>
            <name>proxy-configuration-service</name>
        </value>
    </entry>
    <entry>
        <key>Proxy Host</key>
        <value>
            <name>Proxy Host</name>
        </value>
    </entry>
    <entry>
        <key>Proxy Port</key>
        <value>
            <name>Proxy Port</name>
        </value>
    </entry>
    <entry>
        <key>Proxy Type</key>
        <value>
            <name>Proxy Type</name>
        </value>
    </entry>
    <entry>
        <key>invokehttp-proxy-user</key>
        <value>
            <name>invokehttp-proxy-user</name>
        </value>
    </entry>
    <entry>
        <key>invokehttp-proxy-password</key>
        <value>
            <name>invokehttp-proxy-password</name>
        </value>
    </entry>
    <entry>
        <key>Put Response Body In Attribute</key>
        <value>
            <name>Put Response Body In Attribute</name>
        </value>
    </entry>
    <entry>
        <key>Max Length To Put In Attribute</key>
        <value>
            <name>Max Length To Put In Attribute</name>
        </value>
    </entry>
    <entry>
        <key>Digest Authentication</key>
        <value>
            <name>Digest Authentication</name>
        </value>
    </entry>
    <entry>
        <key>Always Output Response</key>
        <value>
            <name>Always Output Response</name>
        </value>
    </entry>
    <entry>
        <key>Trusted Hostname</key>
        <value>
            <name>Trusted Hostname</name>
        </value>
    </entry>
    <entry>
        <key>Add Response Headers to Request</key>
        <value>
            <name>Add Response Headers to Request</name>
        </value>
    </entry>
    <entry>
        <key>Content-Type</key>
        <value>
            <name>Content-Type</name>
        </value>
    </entry>
    <entry>
        <key>send-message-body</key>
        <value>
            <name>send-message-body</name>
        </value>
    </entry>
    <entry>
        <key>Use Chunked Encoding</key>
        <value>
            <name>Use Chunked Encoding</name>
        </value>
    </entry>
    <entry>
        <key>Penalize on "No Retry"</key>
        <value>
            <name>Penalize on "No Retry"</name>
        </value>
    </entry>
    <entry>
        <key>use-etag</key>
        <value>
            <name>use-etag</name>
        </value>
    </entry>
    <entry>
        <key>etag-max-cache-size</key>
        <value>
            <name>etag-max-cache-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>HTTP Method</key>
        <value>GET</value>
    </entry>
    <entry>
        <key>Remote URL</key>
        <value>${base_url}/forms/${form_id}</value>
    </entry>
    <entry>
        <key>SSL Context Service</key>
    </entry>
    <entry>
        <key>Connection Timeout</key>
        <value>5 secs</value>
    </entry>
    <entry>
        <key>Read Timeout</key>
        <value>15 secs</value>
    </entry>
    <entry>
        <key>Include Date Header</key>
        <value>True</value>
    </entry>
    <entry>
        <key>Follow Redirects</key>
        <value>True</value>
    </entry>
    <entry>
        <key>Attributes to Send</key>
    </entry>
    <entry>
        <key>Basic Authentication Username</key>
    </entry>
    <entry>
        <key>Basic Authentication Password</key>
    </entry>
    <entry>
        <key>proxy-configuration-service</key>
    </entry>
    <entry>
        <key>Proxy Host</key>
    </entry>
    <entry>
        <key>Proxy Port</key>
    </entry>
    <entry>
        <key>Proxy Type</key>
        <value>http</value>
    </entry>
    <entry>
        <key>invokehttp-proxy-user</key>
    </entry>
    <entry>
        <key>invokehttp-proxy-password</key>
    </entry>
    <entry>
        <key>Put Response Body In Attribute</key>
    </entry>
    <entry>
        <key>Max Length To Put In Attribute</key>
        <value>256</value>
    </entry>
    <entry>
        <key>Digest Authentication</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Always Output Response</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Trusted Hostname</key>
        <value>api.ona.io</value>
    </entry>
    <entry>
        <key>Add Response Headers to Request</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Content-Type</key>
        <value>application/json</value>
    </entry>
    <entry>
        <key>send-message-body</key>
        <value>true</value>
    </entry>
    <entry>
        <key>Use Chunked Encoding</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Penalize on "No Retry"</key>
        <value>false</value>
    </entry>
    <entry>
        <key>use-etag</key>
        <value>false</value>
    </entry>
    <entry>
        <key>etag-max-cache-size</key>
        <value>10MB</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>InvokeHTTP</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>Failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>No Retry</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>Original</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>Response</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>Retry</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.InvokeHTTP</type>
                        </processors>
                        <processors>
                            <id>4d3b11a4-5a03-3c1d-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <position>
<x>68.4048122566578</x>
<y>-166.3261357286965</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>File Size</key>
        <value>
            <name>File Size</name>
        </value>
    </entry>
    <entry>
        <key>Batch Size</key>
        <value>
            <name>Batch Size</name>
        </value>
    </entry>
    <entry>
        <key>Data Format</key>
        <value>
            <name>Data Format</name>
        </value>
    </entry>
    <entry>
        <key>Unique FlowFiles</key>
        <value>
            <name>Unique FlowFiles</name>
        </value>
    </entry>
    <entry>
        <key>generate-ff-custom-text</key>
        <value>
            <name>generate-ff-custom-text</name>
        </value>
    </entry>
    <entry>
        <key>character-set</key>
        <value>
            <name>character-set</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>File Size</key>
        <value>0B</value>
    </entry>
    <entry>
        <key>Batch Size</key>
        <value>1</value>
    </entry>
    <entry>
        <key>Data Format</key>
        <value>Text</value>
    </entry>
    <entry>
        <key>Unique FlowFiles</key>
        <value>false</value>
    </entry>
    <entry>
        <key>generate-ff-custom-text</key>
        <value>{
  "form_id": 28138,
  "table_name": "pizza_survey",
  "base_url": "https://api.ona.io/api/v1"	
}</value>
    </entry>
    <entry>
        <key>character-set</key>
        <value>UTF-8</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>10000000 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>GenerateFlowFile</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.GenerateFlowFile</type>
                        </processors>
                        <processors>
                            <id>6266e4c3-1eda-31b2-0000-000000000000</id>
                            <parentGroupId>3c212fa1-ef75-3709-0000-000000000000</parentGroupId>
                            <position>
<x>567.3406032722828</x>
<y>5.122259046694126</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Destination</key>
        <value>
            <name>Destination</name>
        </value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>
            <name>Return Type</name>
        </value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>
            <name>Path Not Found Behavior</name>
        </value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>
            <name>Null Value Representation</name>
        </value>
    </entry>
    <entry>
        <key>form_uuid</key>
        <value>
            <name>form_uuid</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Destination</key>
        <value>flowfile-attribute</value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>auto-detect</value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>ignore</value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>empty string</value>
    </entry>
    <entry>
        <key>form_uuid</key>
        <value>$.uuid</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>EvaluateJsonPath</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                        </processors>
                    </contents>
                    <name>Batch pulls</name>
                    <variables/>
                </processGroups>
                <processGroups>
                    <id>b51d81f0-227f-3d5d-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>2.0</x>
                        <y>274.0039830522328</y>
                    </position>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>17a1ea03-1e51-3618-0000-000000000000</id>
                            <parentGroupId>b51d81f0-227f-3d5d-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>b51d81f0-227f-3d5d-0000-000000000000</groupId>
<id>4b98f2b7-3378-3b07-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>b51d81f0-227f-3d5d-0000-000000000000</groupId>
<id>391593cc-9809-3d17-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>cb442179-a39c-3d0d-0000-000000000000</id>
                            <parentGroupId>b51d81f0-227f-3d5d-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>b51d81f0-227f-3d5d-0000-000000000000</groupId>
<id>1963e9cb-3f10-394b-0000-000000000000</id>
<type>OUTPUT_PORT</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>b51d81f0-227f-3d5d-0000-000000000000</groupId>
<id>4b98f2b7-3378-3b07-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <outputPorts>
                            <id>1963e9cb-3f10-394b-0000-000000000000</id>
                            <parentGroupId>b51d81f0-227f-3d5d-0000-000000000000</parentGroupId>
                            <position>
<x>386.0000167365008</x>
<y>413.99999849795324</y>
                            </position>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>JSON definition</name>
                            <state>RUNNING</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>391593cc-9809-3d17-0000-000000000000</id>
                            <parentGroupId>b51d81f0-227f-3d5d-0000-000000000000</parentGroupId>
                            <position>
<x>323.0000167365008</x>
<y>52.99999849795325</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>File Size</key>
        <value>
            <name>File Size</name>
        </value>
    </entry>
    <entry>
        <key>Batch Size</key>
        <value>
            <name>Batch Size</name>
        </value>
    </entry>
    <entry>
        <key>Data Format</key>
        <value>
            <name>Data Format</name>
        </value>
    </entry>
    <entry>
        <key>Unique FlowFiles</key>
        <value>
            <name>Unique FlowFiles</name>
        </value>
    </entry>
    <entry>
        <key>generate-ff-custom-text</key>
        <value>
            <name>generate-ff-custom-text</name>
        </value>
    </entry>
    <entry>
        <key>character-set</key>
        <value>
            <name>character-set</name>
        </value>
    </entry>
    <entry>
        <key>json_feed</key>
        <value>
            <name>json_feed</name>
        </value>
    </entry>
    <entry>
        <key>response</key>
        <value>
            <name>response</name>
        </value>
    </entry>
    <entry>
        <key>survey</key>
        <value>
            <name>survey</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>File Size</key>
        <value>0B</value>
    </entry>
    <entry>
        <key>Batch Size</key>
        <value>1</value>
    </entry>
    <entry>
        <key>Data Format</key>
        <value>Text</value>
    </entry>
    <entry>
        <key>Unique FlowFiles</key>
        <value>false</value>
    </entry>
    <entry>
        <key>generate-ff-custom-text</key>
        <value>{"links":{"self":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289"},"data":{"type":"packages","id":"ddc6c9ed-a502-4736-b343-dbc6c661e289","attributes":{"profile":"flow-results-package","name":"v3_live_mg_drought_food_security_130619","flow-results-specification":"1.0.0-rc1","created":"2019-05-29T13:36:27+00:00","modified":"2019-06-13T13:52:11+00:00","id":"ddc6c9ed-a502-4736-b343-dbc6c661e289","title":"V3 LIVE_MG Drought &amp; Food Security 13.06.19","resources":[{"profile":"data-resource","name":"v3_live_mg_drought_food_security_130619-data","path":null,"api-data-url":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289\/resources","mediatype":"application\/vnd.api+json","encoding":"utf-8","schema":{"language":"eng","fields":[{"name":"timestamp","title":"Timestamp","type":"datetime"},{"name":"row_id","title":"Row ID","type":"string"},{"name":"contact_id","title":"Contact ID","type":"string"},{"name":"session_id","title":"Session ID","type":"string"},{"name":"question_id","title":"Question ID","type":"string"},{"name":"response","title":"Response","type":"any"},{"name":"response_metadata","title":"Response Metadata","type":"object"}],"questions":{"q_1555589635646_68":{"type":"select_one","label":"Introduction","type_options":{"choices":["Yes","No","Call back later"]}},"q_1555589684531_13":{"type":"select_one","label":"Region","type_options":{"choices":["Alaotra Mangoro","Atsimo Atsinanana","Boeny","Grand Sud","Other"]}},"q_1555589729805_50":{"type":"select_one","label":"eligibility- Is farming your primary source of income?","type_options":{"choices":["Yes","No"]}},"q_1555589798758_43":{"type":"select_one","label":"Q2- What is your age?","type_options":{"choices":["17 or under","18 or over"]}},"q_1555589835405_38":{"type":"select_one","label":"Q3- What is your gender?","type_options":{"choices":["Female","Male"]}},"q_1555589899730_30":{"type":"select_one","label":"Q4- What is the most important crop you grow for your livelihood?","type_options":{"choices":["rice","cassava","maize","other"]}},"q_1556193457436_80":{"type":"select_one","label":"Q5- How does low rainfall affect your most important crop?","type_options":{"choices":["lot of damage","some damage","does not affect crop","not sure"]}},"q_1556193523660_53":{"type":"select_one","label":"Q6- When does low rainfall damage your crop production the most?","type_options":{"choices":["beginning of season","throughout the season","does not affect my crop","not sure"]}},"q_1556193555099_90":{"type":"select_one","label":"Q7-What caused the greatest damage to your crops not related to low rainfall?","type_options":{"choices":["flood","lack of fertilizers or inputs","weed\/invasive species","other","n\/a"]}},"q_1556193638400_56":{"type":"select_one","label":"Q8- What has been the biggest negative impact of rainfall shortage on your household?","type_options":{"choices":["reduced food","sold our belongings","finding additional employment","take out loan","migrate and leave home","other"]}},"q_1556193677062_43":{"type":"select_one","label":"Q8_a- Would you like to share any other negative impact of rainfall shortage on your household?","type_options":{"choices":["Yes","No"]}},"q_1556193739882_13":{"type":"select_one","label":"Q9- How often do you experience rainfall deficit?","type_options":{"choices":["once every 10 years","once ever 5 years","once every 3 years","once every other year","don't know"]}},"q_1556295096414_35":{"type":"select_one","label":"district_1","type_options":{"choices":["Ambatondrazaka","Amparafaravola"]}},"q_1556295390881_89":{"type":"select_one","label":"district_2","type_options":{"choices":["Farafangana","Vangaindrano"]}},"q_1557140913265_58":{"type":"select_one","label":"district_3","type_options":{"choices":["Mitsinijo","Marovay"]}},"q_1557159306778_35":{"type":"select_one","label":"Q1- How long have you lived in this district?","type_options":{"choices":["less than 5 years","less than 15 years","more than 15 years"]}},"q_1557160308649_83":{"type":"select_one","label":"Q8_b- What has been the biggest negative impact of rainfall shortage on your household?","type_options":{"choices":["reduced food","sold our belongings","finding additional employment","take out loan","migrate and leave home","other"]}},"q_1557160656801_28":{"type":"select_one","label":"Q10- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{"choices":["2004 -2007","2008 - 2011","2012-2015","2016-2019","don't know"]}},"q_1557160854704_39":{"type":"select_one","label":"Q11_a","type_options":{"choices":["2004","2005","2006","2007"]}},"q_1557160893212_84":{"type":"select_one","label":"Q11_b","type_options":{"choices":["2008","2009","2010","2011"]}},"q_1557160924691_19":{"type":"select_one","label":"Q11_c","type_options":{"choices":["2012","2013","2014","2015"]}},"q_1557160955434_98":{"type":"select_one","label":"Q11_d","type_options":{"choices":["2016","2017","2018","2019"]}},"q_1557161266139_61":{"type":"open","label":"Q16- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{}},"q_1557161379181_63":{"type":"select_one","label":"Q12- Do you remember another year with severe rainfall shortage?","type_options":{"choices":["Yes","No"]}},"q_1557161513897_97":{"type":"select_one","label":"Q13- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{"choices":["2004 -2007","2008 - 2011","2012-2015","2016-2019","don't know"]}},"q_1557161612186_59":{"type":"select_one","label":"Q13_a","type_options":{"choices":["2004","2005","2006","2007"]}},"q_1557161628936_73":{"type":"select_one","label":"Q13_b","type_options":{"choices":["2008","2009","2010","2011"]}},"q_1557161651943_86":{"type":"select_one","label":"Q13_c","type_options":{"choices":["2012","2013","2014","2015"]}},"q_1557161674568_54":{"type":"select_one","label":"Q13_d","type_options":{"choices":["2016","2017","2018","2019"]}},"q_1557161767788_27":{"type":"select_one","label":"Q14- Do you remember another year with severe rainfall shortage?","type_options":{"choices":["Yes","No"]}},"q_1557162352639_23":{"type":"select_one","label":"Q15- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{"choices":["2004 -2007","2008 - 2011","2012-2015","2016-2019","don't know"]}},"q_1557163035598_50":{"type":"select_one","label":"Q15_a","type_options":{"choices":["2004","2005","2006","2007"]}},"q_1557163077385_26":{"type":"select_one","label":"Q15_b","type_options":{"choices":["2008","2009","2010","2011"]}},"q_1557163132992_44":{"type":"select_one","label":"Q15_c","type_options":{"choices":["2012","2013","2014","2015"]}},"q_1557163295704_24":{"type":"select_one","label":"Q15_d","type_options":{"choices":["2016","2017","2018","2019"]}}}}}]}},"relationships":{"responses":{"links":{"related":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289\/responses"}}}}</value>
    </entry>
    <entry>
        <key>character-set</key>
        <value>UTF-8</value>
    </entry>
    <entry>
        <key>json_feed</key>
        <value>true</value>
    </entry>
    <entry>
        <key>response</key>
        <value>{"data":{"type":"flow-results-data","id":"ddc6c9ed-a502-4736-b343-dbc6c661e289","attributes":{"responses":[["2019-05-29T13:43:52+00:00","980466493802704896","980466052636868608","980466053526614016","q_1555589635646_68",null,{}],["2019-05-29T13:44:18+00:00","980466603680886784","980466054553665536","980466058110988288","q_1555589635646_68",null,{}],["2019-05-29T13:45:56+00:00","980466871894044672","980466057741336576","980466062426927104","q_1555589635646_68","Yes",{}],["2019-05-29T13:45:31+00:00","980466888532848640","980466057800056832","980466062460481536","q_1555589635646_68",null,{}],["2019-05-29T13:46:13+00:00","980467059983413248","980466057741336576","980466062426927104","q_1555589729805_50","No",{}],["2019-05-29T13:47:39+00:00","980467296273723392","980466060081758208","980466063945265152","q_1555589635646_68",null,{}],["2019-05-29T13:48:51+00:00","980467607646269440","980466061197443072","980466064771543040","q_1555589635646_68","Yes",{}],["2019-05-29T13:49:31+00:00","980467735857754112","980466061759479808","980466065178390528","q_1555589635646_68","Call back later",{}],["2019-05-29T13:49:05+00:00","980467797044260864","980466061197443072","980466064771543040","q_1555589729805_50","Yes",{}],["2019-05-29T13:49:37+00:00","980467877298073600","980466061197443072","980466064771543040","q_1555589684531_13","Other",{}],["2019-05-29T13:50:06+00:00","980467888840798208","980466059398086656","980466063551000576","q_1555589635646_68","Yes",{}],["2019-05-29T13:50:41+00:00","980468053685334016","980466062787084288","980466065874644992","q_1555589635646_68","No",{}],["2019-05-29T13:50:52+00:00","980468080331747328","980466063302983680","980466066180829184","q_1555589635646_68","Call back later",{}],["2019-05-29T13:50:52+00:00","980468081283854336","980466064045375488","980466066625425408","q_1555589635646_68","No",{}],["2019-05-29T13:50:21+00:00","980468107523420160","980466059398086656","980466063551000576","q_1555589729805_50","Yes",{}],["2019-05-29T13:50:57+00:00","980468155120381952","980466064171204608","980466066709311488","q_1555589635646_68",null,{}],["2019-05-29T13:51:20+00:00","980468196979535872","980466059398086656","980466063551000576","q_1555589684531_13",null,{}],["2019-05-29T13:51:55+00:00","980468334468820992","980466065156866048","980466067380400128","q_1555589635646_68","Call back later",{}],["2019-05-29T13:52:12+00:00","980468421517406208","980466065794400256","980466067833384960","q_1555589635646_68","Call back later",{}],["2019-05-29T13:51:55+00:00","980468512001126400","980466066343854080","980466068210872320","q_1555589635646_68","No",{}],["2019-05-29T13:56:12+00:00","980469220771393536","980466071448322048","980466077618696192","q_1555589635646_68","Yes",{}],["2019-05-29T13:56:30+00:00","980469645885075456","980466071448322048","980466077618696192","q_1555589729805_50","No",{}],["2019-05-29T13:56:51+00:00","980469748725215232","980466071272161280","980466077501255680","q_1555589635646_68",null,{}],["2019-05-29T13:57:28+00:00","980469774864117760","980466073620971520","980466079061536768","q_1555589635646_68","Yes",{}],["2019-05-29T13:58:03+00:00","980469874562723840","980466074371751936","980466079585824768","q_1555589635646_68","No",{}],["2019-05-29T13:57:41+00:00","980469962605359104","980466073620971520","980466079061536768","q_1555589729805_50","Yes",{}],["2019-05-29T13:58:05+00:00","980470039818301440","980466073620971520","980466079061536768","q_1555589684531_13","Alaotra Mangoro",{}],["2019-05-29T13:58:40+00:00","980470065860734976","980466074690519040","980466079808122880","q_1555589635646_68","Yes",{}],["2019-05-29T13:58:14+00:00","980470090854592512","980466073620971520","980466079061536768","q_1556295096414_35","Ambatondrazaka",{}],["2019-05-29T13:58:27+00:00","980470126657171456","980466073620971520","980466079061536768","q_1557159306778_35","more than 15 years",{}],["2019-05-29T13:59:00+00:00","980470153584603136","980466073411256320","980466078918930432","q_1555589635646_68","Yes",{}],["2019-05-29T13:58:41+00:00","980470161046269952","980466075571322880","980466080399519744","q_1555589635646_68",null,{}],["2019-05-29T13:58:38+00:00","980470181631913984","980466073620971520","980466079061536768","q_1555589798758_43","18 or over",{}],["2019-05-29T13:58:45+00:00","980470225860849664","980466073620971520","980466079061536768","q_1555589835405_38","Male",{}],["2019-05-29T13:58:53+00:00","980470258995851264","980466073620971520","980466079061536768","q_1555589899730_30","rice",{}],["2019-05-29T13:58:58+00:00","980470264431669248","980466074690519040","980466079808122880","q_1555589729805_50","No",{}],["2019-05-29T13:59:09+00:00","980470292374122496","980466073620971520","980466079061536768","q_1556193457436_80","lot of damage",{}],["2019-05-29T13:59:15+00:00","980470348795899904","980466073411256320","980466078918930432","q_1555589729805_50","Yes",{}],["2019-05-29T13:59:27+00:00","980470358136614912","980466073620971520","980466079061536768","q_1556193523660_53","beginning of season",{}],["2019-05-29T13:59:40+00:00","980470430706462720","980466076208857088","980466080848310272","q_1555589635646_68",null,{}],["2019-05-29T13:59:43+00:00","980470434649108480","980466073620971520","980466079061536768","q_1556193555099_90","weed\/invasive species",{}],["2019-05-29T13:59:48+00:00","980470434837852160","980466073411256320","980466078918930432","q_1555589684531_13","Other",{}],["2019-05-29T14:00:10+00:00","980470436532350976","980466076049473536","980466080739258368","q_1555589635646_68",null,{}],["2019-05-29T14:00:08+00:00","980470500470321152","980466073620971520","980466079061536768","q_1556193638400_56","finding additional employment",{}],["2019-05-29T14:00:17+00:00","980470603960578048","980466073620971520","980466079061536768","q_1556193677062_43","Yes",{}],["2019-05-29T14:00:47+00:00","980470606691069952","980466077710417920","980466081888497664","q_1555589635646_68","Yes",{}],["2019-05-29T14:00:46+00:00","980470644909568000","980466073620971520","980466079061536768","q_1557160308649_83","finding additional employment",{}],["2019-05-29T14:01:00+00:00","980470765453864960","980466073620971520","980466079061536768","q_1556193739882_13","once ever 5 years",{}],["2019-05-29T14:01:08+00:00","980470798135881728","980466077710417920","980466081888497664","q_1555589729805_50","Yes",{}],["2019-05-29T14:01:17+00:00","980470822571896832","980466073620971520","980466079061536768","q_1557161266139_61","https:\/\/s3-us-west-2.amazonaws.com\/audioresponses.votomobile.org\/wav\/5cee909c5b5a54.59940451.wav",{"type":"audio","format":"audio\/wav"}],["2019-05-29T14:01:14+00:00","980470843862183936","980466078121459712","980466082177904640","q_1555589635646_68",null,{}],["2019-05-29T14:02:07+00:00","980470908429299712","980466077710417920","980466081888497664","q_1555589684531_13","Other",{}],["2019-05-29T14:02:26+00:00","980470988431454208","980466078889017344","980466082693804032","q_1555589635646_68","Yes",{}],["2019-05-29T14:02:35+00:00","980471053921316864","980466079996313600","980466083482333184","q_1555589635646_68","Yes",{}],["2019-05-29T14:02:44+00:00","980471212776386560","980466078889017344","980466082693804032","q_1555589729805_50","No",{}],["2019-05-29T14:02:49+00:00","980471252693577728","980466079996313600","980466083482333184","q_1555589729805_50","Yes",{}],["2019-05-29T14:03:22+00:00","980471332670566400","980466079996313600","980466083482333184","q_1555589684531_13","Other",{}],["2019-05-29T14:09:11+00:00","980472810915262464","980472593972723712","980472595537752064","q_1555589635646_68",null,{}],["2019-05-29T14:09:55+00:00","980472874907758592","980472593628790784","980472595353202688","q_1555589635646_68","Call back later",{}],["2019-05-29T14:10:01+00:00","980472926493503488","980472594547343360","980472596385001472","q_1555589635646_68","Yes",{}],["2019-05-29T14:10:29+00:00","980473043174846464","980472594845138944","980472596582133760","q_1555589635646_68","Yes",{}],["2019-05-29T14:10:45+00:00","980473082798436352","980472595268763648","980472596867346432","q_1555589635646_68","No",{}],["2019-05-29T14:10:15+00:00","980473123508350976","980472594547343360","980472596385001472","q_1555589729805_50","Yes",{}],["2019-05-29T14:10:57+00:00","980473134321266688","980472595981795328","980472597341302784","q_1555589635646_68","Yes",{}],["2019-05-29T14:11:01+00:00","980473187249188864","980472596556414976","980472597668458496","q_1555589635646_68","Yes",{}],["2019-05-29T14:10:49+00:00","980473203565031424","980472594547343360","980472596385001472","q_1555589684531_13","Alaotra Mangoro",{}],["2019-05-29T14:10:44+00:00","980473238709104640","980472594845138944","980472596582133760","q_1555589729805_50","Yes",{}],["2019-05-29T14:11:33+00:00","980473292530413568","980472594547343360","980472596385001472","q_1556295096414_35",null,{}],["2019-05-29T14:11:40+00:00","980473325581529088","980472597441413120","980472598339547136","q_1555589635646_68","Call back later",{}],["2019-05-29T14:11:12+00:00","980473326521053184","980472594845138944","980472596582133760","q_1555589684531_13","Alaotra Mangoro",{}],["2019-05-29T14:11:14+00:00","980473358531981312","980472595981795328","980472597341302784","q_1555589729805_50","Yes",{}],["2019-05-29T14:11:22+00:00","980473381382549504","980472596556414976","980472597668458496","q_1555589729805_50","Yes",{}],["2019-05-29T14:11:22+00:00","980473391763451904","980472594845138944","980472596582133760","q_1556295096414_35","Amparafaravola",{}],["2019-05-29T14:11:34+00:00","980473430405574656","980472594845138944","980472596582133760","q_1557159306778_35","less than 15 years",{}],["2019-05-29T14:11:48+00:00","980473452496973824","980472595981795328","980472597341302784","q_1555589684531_13","Other",{}],["2019-05-29T14:11:46+00:00","980473484319158272","980472594845138944","980472596582133760","q_1555589798758_43","18 or over",{}],["2019-05-29T14:11:52+00:00","980473486152069120","980472596556414976","980472597668458496","q_1555589684531_13","Other",{}],["2019-05-29T14:12:26+00:00","980473497673822208","980472597823094784","980472598733811712","q_1555589635646_68","Call back later",{}],["2019-05-29T14:11:56+00:00","980473533707087872","980472594845138944","980472596582133760","q_1555589835405_38","Male",{}],["2019-05-29T14:12:10+00:00","980473572558925824","980472594845138944","980472596582133760","q_1555589899730_30","rice",{}],["2019-05-29T14:12:53+00:00","980473624664764416","980472598863282176","980472599773999104","q_1555589635646_68","Call back later",{}],["2019-05-29T14:12:28+00:00","980473631811858432","980472594845138944","980472596582133760","q_1556193457436_80","does not affect crop",{}],["2019-05-29T14:12:48+00:00","980473710002073600","980472594845138944","980472596582133760","q_1556193523660_53","does not affect my crop",{}],["2019-05-29T14:13:29+00:00","980473774724378624","980472599228186624","980472600130514944","q_1555589635646_68","Call back later",{}],["2019-05-29T14:13:05+00:00","980473791530954752","980472594845138944","980472596582133760","q_1556193555099_90","lack of fertilizers or inputs",{}],["2019-05-29T14:13:21+00:00","980473864071442432","980472594845138944","980472596582133760","q_1556193638400_56","reduced food",{}],["2019-05-29T14:13:30+00:00","980473929070571520","980472594845138944","980472596582133760","q_1556193677062_43","Yes",{}],["2019-05-29T14:13:47+00:00","980473970929725440","980472594845138944","980472596582133760","q_1557160308649_83","reduced food",{}],["2019-05-29T14:14:28+00:00","980474024738451456","980472600842993664","980472601741127680","q_1555589635646_68","Call back later",{}],["2019-05-29T14:14:02+00:00","980474041054294016","980472594845138944","980472596582133760","q_1556193739882_13","once ever 5 years",{}],["2019-05-29T14:14:05+00:00","980474063825170432","980472599970578432","980472600868712448","q_1555589635646_68",null,{}],["2019-05-29T14:14:33+00:00","980474101846536192","980472594845138944","980472596582133760","q_1557161266139_61","https:\/\/s3-us-west-2.amazonaws.com\/audioresponses.votomobile.org\/wav\/5cee93aa346955.48047368.wav",{"type":"audio","format":"audio\/wav"}],["2019-05-29T14:15:30+00:00","980474312274767872","980472602487160832","980472603389489152","q_1555589635646_68",null,{}],["2019-05-29T14:16:26+00:00","980474518873600000","980472601694437376","980472602596765696","q_1555589635646_68","Yes",{}],["2019-05-29T14:18:06+00:00","980474612205252608","980472605112795136","980472606015123456","q_1555589635646_68",null,{}],["2019-05-29T14:17:04+00:00","980474642131611648","980472605465116672","980472606363250688","q_1555589635646_68","Yes",{}],["2019-05-29T14:17:13+00:00","980474703418781696","980472605045686272","980472605948014592","q_1555589635646_68","Call back later",{}],["2019-05-29T14:16:43+00:00","980474738680295424","980472601694437376","980472602596765696","q_1555589729805_50","Yes",{}],["2019-05-29T14:17:15+00:00","980474832758534144","980472601694437376","980472602596765696","q_1555589684531_13","Other",{}],["2019-05-29T14:17:19+00:00","980474896998494208","980472605465116672","980472606363250688","q_1555589729805_50","Yes",{}]]},"relationships":{"descriptor":{"links":{"self":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289"}},"links":{"self":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289\/responses?page%5Bsize%5D=100","next":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289\/responses?page%5Bsize%5D=100&amp;page%5BafterCursor%5D=980474896998494208","previous":null}}}}</value>
    </entry>
    <entry>
        <key>survey</key>
        <value>{"links":{"self":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289"},"data":{"type":"packages","id":"ddc6c9ed-a502-4736-b343-dbc6c661e289","attributes":{"profile":"flow-results-package","name":"v3_live_mg_drought_food_security_130619","flow-results-specification":"1.0.0-rc1","created":"2019-05-29T13:36:27+00:00","modified":"2019-06-13T13:52:11+00:00","id":"ddc6c9ed-a502-4736-b343-dbc6c661e289","title":"V3 LIVE_MG Drought &amp; Food Security 13.06.19","resources":[{"profile":"data-resource","name":"v3_live_mg_drought_food_security_130619-data","path":null,"api-data-url":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289\/resources","mediatype":"application\/vnd.api+json","encoding":"utf-8","schema":{"language":"eng","fields":[{"name":"timestamp","title":"Timestamp","type":"datetime"},{"name":"row_id","title":"Row ID","type":"string"},{"name":"contact_id","title":"Contact ID","type":"string"},{"name":"session_id","title":"Session ID","type":"string"},{"name":"question_id","title":"Question ID","type":"string"},{"name":"response","title":"Response","type":"any"},{"name":"response_metadata","title":"Response Metadata","type":"object"}],"questions":{"q_1555589635646_68":{"type":"select_one","label":"Introduction","type_options":{"choices":["Yes","No","Call back later"]}},"q_1555589684531_13":{"type":"select_one","label":"Region","type_options":{"choices":["Alaotra Mangoro","Atsimo Atsinanana","Boeny","Grand Sud","Other"]}},"q_1555589729805_50":{"type":"select_one","label":"eligibility- Is farming your primary source of income?","type_options":{"choices":["Yes","No"]}},"q_1555589798758_43":{"type":"select_one","label":"Q2- What is your age?","type_options":{"choices":["17 or under","18 or over"]}},"q_1555589835405_38":{"type":"select_one","label":"Q3- What is your gender?","type_options":{"choices":["Female","Male"]}},"q_1555589899730_30":{"type":"select_one","label":"Q4- What is the most important crop you grow for your livelihood?","type_options":{"choices":["rice","cassava","maize","other"]}},"q_1556193457436_80":{"type":"select_one","label":"Q5- How does low rainfall affect your most important crop?","type_options":{"choices":["lot of damage","some damage","does not affect crop","not sure"]}},"q_1556193523660_53":{"type":"select_one","label":"Q6- When does low rainfall damage your crop production the most?","type_options":{"choices":["beginning of season","throughout the season","does not affect my crop","not sure"]}},"q_1556193555099_90":{"type":"select_one","label":"Q7-What caused the greatest damage to your crops not related to low rainfall?","type_options":{"choices":["flood","lack of fertilizers or inputs","weed\/invasive species","other","n\/a"]}},"q_1556193638400_56":{"type":"select_one","label":"Q8- What has been the biggest negative impact of rainfall shortage on your household?","type_options":{"choices":["reduced food","sold our belongings","finding additional employment","take out loan","migrate and leave home","other"]}},"q_1556193677062_43":{"type":"select_one","label":"Q8_a- Would you like to share any other negative impact of rainfall shortage on your household?","type_options":{"choices":["Yes","No"]}},"q_1556193739882_13":{"type":"select_one","label":"Q9- How often do you experience rainfall deficit?","type_options":{"choices":["once every 10 years","once ever 5 years","once every 3 years","once every other year","don't know"]}},"q_1556295096414_35":{"type":"select_one","label":"district_1","type_options":{"choices":["Ambatondrazaka","Amparafaravola"]}},"q_1556295390881_89":{"type":"select_one","label":"district_2","type_options":{"choices":["Farafangana","Vangaindrano"]}},"q_1557140913265_58":{"type":"select_one","label":"district_3","type_options":{"choices":["Mitsinijo","Marovay"]}},"q_1557159306778_35":{"type":"select_one","label":"Q1- How long have you lived in this district?","type_options":{"choices":["less than 5 years","less than 15 years","more than 15 years"]}},"q_1557160308649_83":{"type":"select_one","label":"Q8_b- What has been the biggest negative impact of rainfall shortage on your household?","type_options":{"choices":["reduced food","sold our belongings","finding additional employment","take out loan","migrate and leave home","other"]}},"q_1557160656801_28":{"type":"select_one","label":"Q10- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{"choices":["2004 -2007","2008 - 2011","2012-2015","2016-2019","don't know"]}},"q_1557160854704_39":{"type":"select_one","label":"Q11_a","type_options":{"choices":["2004","2005","2006","2007"]}},"q_1557160893212_84":{"type":"select_one","label":"Q11_b","type_options":{"choices":["2008","2009","2010","2011"]}},"q_1557160924691_19":{"type":"select_one","label":"Q11_c","type_options":{"choices":["2012","2013","2014","2015"]}},"q_1557160955434_98":{"type":"select_one","label":"Q11_d","type_options":{"choices":["2016","2017","2018","2019"]}},"q_1557161266139_61":{"type":"open","label":"Q16- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{}},"q_1557161379181_63":{"type":"select_one","label":"Q12- Do you remember another year with severe rainfall shortage?","type_options":{"choices":["Yes","No"]}},"q_1557161513897_97":{"type":"select_one","label":"Q13- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{"choices":["2004 -2007","2008 - 2011","2012-2015","2016-2019","don't know"]}},"q_1557161612186_59":{"type":"select_one","label":"Q13_a","type_options":{"choices":["2004","2005","2006","2007"]}},"q_1557161628936_73":{"type":"select_one","label":"Q13_b","type_options":{"choices":["2008","2009","2010","2011"]}},"q_1557161651943_86":{"type":"select_one","label":"Q13_c","type_options":{"choices":["2012","2013","2014","2015"]}},"q_1557161674568_54":{"type":"select_one","label":"Q13_d","type_options":{"choices":["2016","2017","2018","2019"]}},"q_1557161767788_27":{"type":"select_one","label":"Q14- Do you remember another year with severe rainfall shortage?","type_options":{"choices":["Yes","No"]}},"q_1557162352639_23":{"type":"select_one","label":"Q15- In the last 15 years, which 3 years do you remember there being severe rainfall shortage?","type_options":{"choices":["2004 -2007","2008 - 2011","2012-2015","2016-2019","don't know"]}},"q_1557163035598_50":{"type":"select_one","label":"Q15_a","type_options":{"choices":["2004","2005","2006","2007"]}},"q_1557163077385_26":{"type":"select_one","label":"Q15_b","type_options":{"choices":["2008","2009","2010","2011"]}},"q_1557163132992_44":{"type":"select_one","label":"Q15_c","type_options":{"choices":["2012","2013","2014","2015"]}},"q_1557163295704_24":{"type":"select_one","label":"Q15_d","type_options":{"choices":["2016","2017","2018","2019"]}}}}}]}},"relationships":{"responses":{"links":{"related":"https:\/\/go.votomobile.org\/flow-results\/packages\/ddc6c9ed-a502-4736-b343-dbc6c661e289\/responses"}}}}</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>10000000 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>GenerateFlowFile</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.GenerateFlowFile</type>
                        </processors>
                        <processors>
                            <id>4b98f2b7-3378-3b07-0000-000000000000</id>
                            <parentGroupId>b51d81f0-227f-3d5d-0000-000000000000</parentGroupId>
                            <position>
<x>323.0000167365008</x>
<y>233.99999849795324</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Destination</key>
        <value>
            <name>Destination</name>
        </value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>
            <name>Return Type</name>
        </value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>
            <name>Path Not Found Behavior</name>
        </value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>
            <name>Null Value Representation</name>
        </value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>
            <name>table_name</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Destination</key>
        <value>flowfile-attribute</value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>auto-detect</value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>ignore</value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>empty string</value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>$.data.attributes.name</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>EvaluateJsonPath</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                        </processors>
                    </contents>
                    <name>Predefined JSON</name>
                    <variables/>
                </processGroups>
                <processGroups>
                    <id>f10ac1dd-99fa-3c65-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>477.1609870117412</x>
                        <y>267.9125337600708</y>
                    </position>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>00451774-f5e9-3763-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>13c2a241-7194-3ccb-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>4e2053da-73b9-363f-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>0b7c931c-80b4-306d-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>678e5e50-7a3f-3695-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>3b0bec57-a1a1-3f1b-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>2ee9839f-f649-372b-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>fbebecd2-2097-3d32-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>678e5e50-7a3f-3695-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>2f338f74-6b39-304f-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>3b0bec57-a1a1-3f1b-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>b04104e3-3cae-3c16-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>496e0668-0489-3a28-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>9e81316b-40b7-3130-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>Response</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>b484a9e5-04c7-3a09-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>49da965d-463a-33b8-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>9e81316b-40b7-3130-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>exists_json_feed</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>fbebecd2-2097-3d32-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>89492ec1-2a6d-3c2d-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>9a7ca685-4984-3a37-0000-000000000000</id>
<type>OUTPUT_PORT</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>1266162f-321b-3d3c-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>b0904e8f-97e9-30a0-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <bends>
<x>1500.3349506538743</x>
<y>-83.93071284089444</y>
                            </bends>
                            <bends>
<x>1513.8884174507493</x>
<y>-29.864680431226475</y>
                            </bends>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>b484a9e5-04c7-3a09-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>Retry</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>b484a9e5-04c7-3a09-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>bb4930f9-7a90-3f5d-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>1266162f-321b-3d3c-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>13c2a241-7194-3ccb-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>cdead127-4704-3ed2-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>9a7ca685-4984-3a37-0000-000000000000</id>
<type>OUTPUT_PORT</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>69e4e39a-a2a7-396b-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>d1249ab4-454d-355a-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>4e2053da-73b9-363f-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>unmatched</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>fbebecd2-2097-3d32-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>d6142927-9757-3e04-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>69e4e39a-a2a7-396b-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>9e81316b-40b7-3130-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>dd47c04a-a485-38c5-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>b04104e3-3cae-3c16-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>15b98627-1685-36eb-0000-000000000000</id>
<type>INPUT_PORT</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>f132471d-5137-3d8f-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>b484a9e5-04c7-3a09-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>exists_uuid</selectedRelationships>
                            <source>
<groupId>f10ac1dd-99fa-3c65-0000-000000000000</groupId>
<id>fbebecd2-2097-3d32-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <inputPorts>
                            <id>15b98627-1685-36eb-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>1667.8357898546365</x>
<y>-581.4191692428061</y>
                            </position>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>Check if Table exists</name>
                            <state>RUNNING</state>
                            <type>INPUT_PORT</type>
                        </inputPorts>
                        <outputPorts>
                            <id>9a7ca685-4984-3a37-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>1674.5577136827615</x>
<y>438.7777664108804</y>
                            </position>
                            <comments></comments>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>Table exist or created</name>
                            <state>RUNNING</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>1266162f-321b-3d3c-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>2071.784428790605</x>
<y>233.10579014535608</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Destination</key>
        <value>
            <name>Destination</name>
        </value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>
            <name>Return Type</name>
        </value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>
            <name>Path Not Found Behavior</name>
        </value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>
            <name>Null Value Representation</name>
        </value>
    </entry>
    <entry>
        <key>geopoints</key>
        <value>
            <name>geopoints</name>
        </value>
    </entry>
    <entry>
        <key>long_field_names_map</key>
        <value>
            <name>long_field_names_map</name>
        </value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>
            <name>table_name</name>
        </value>
    </entry>
    <entry>
        <key>token</key>
        <value>
            <name>token</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Destination</key>
        <value>flowfile-attribute</value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>auto-detect</value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>ignore</value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>empty string</value>
    </entry>
    <entry>
        <key>geopoints</key>
        <value>$.geotypes</value>
    </entry>
    <entry>
        <key>long_field_names_map</key>
        <value>$.long_field_names_map</value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>$.table_name</value>
    </entry>
    <entry>
        <key>token</key>
        <value>$.token</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>EvaluateJsonPath</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                        </processors>
                        <processors>
                            <id>13c2a241-7194-3ccb-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>2072.42755014118</x>
<y>57.171405317446386</y>
                            </position>
                            <bundle>
<artifact>nifi-avro-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>JSON container options</key>
        <value>
            <name>JSON container options</name>
        </value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>
            <name>Wrap Single Record</name>
        </value>
    </entry>
    <entry>
        <key>Avro schema</key>
        <value>
            <name>Avro schema</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>JSON container options</key>
        <value>array</value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Avro schema</key>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ConvertAvroToJSON</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.avro.ConvertAvroToJSON</type>
                        </processors>
                        <processors>
                            <id>3b0bec57-a1a1-3f1b-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>2074.0446643989917</x>
<y>-470.4041836718119</y>
                            </position>
                            <bundle>
<artifact>nifi-avro-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>JSON container options</key>
        <value>
            <name>JSON container options</name>
        </value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>
            <name>Wrap Single Record</name>
        </value>
    </entry>
    <entry>
        <key>Avro schema</key>
        <value>
            <name>Avro schema</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>JSON container options</key>
        <value>array</value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Avro schema</key>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ConvertAvroToJSON</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.avro.ConvertAvroToJSON</type>
                        </processors>
                        <processors>
                            <id>4e2053da-73b9-363f-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>2074.399235932195</x>
<y>-113.35557250771836</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>6a898f0f-83bf-37b9-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>SELECT long_field_names_map, geotypes, table_name, token FROM form_details WHERE table_name = '${table_name}'; </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ExecuteSQL</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>678e5e50-7a3f-3695-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>1617.283079170106</x>
<y>-302.82492780306774</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Destination</key>
        <value>
            <name>Destination</name>
        </value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>
            <name>Return Type</name>
        </value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>
            <name>Path Not Found Behavior</name>
        </value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>
            <name>Null Value Representation</name>
        </value>
    </entry>
    <entry>
        <key>exists</key>
        <value>
            <name>exists</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Destination</key>
        <value>flowfile-attribute</value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>auto-detect</value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>ignore</value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>empty string</value>
    </entry>
    <entry>
        <key>exists</key>
        <value>$.exists</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>EvaluateJsonPath</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                        </processors>
                        <processors>
                            <id>69e4e39a-a2a7-396b-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>1621.866582123601</x>
<y>220.66071806158664</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>6a898f0f-83bf-37b9-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>CREATE TABLE raw_${table_name} (row_id VARCHAR, submission_id VARCHAR, row_details JSONB);</value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>${table_statement}</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>INSERT INTO form_details(form_id, table_name, long_field_names_map, date_added, token, geotypes) VALUES('${form_id}', '${table_name}', '${long_field_names_map}', '${now():format('YYYY-MM-dd HH:mm:ss.SSS')}', '${token}', '${geopoints}');</value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ExecuteSQL</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>STOPPED</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>9e81316b-40b7-3130-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>1624.967656342351</x>
<y>50.210190870424526</y>
                            </position>
                            <bundle>
<artifact>nifi-scripting-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Script Engine</key>
        <value>
            <name>Script Engine</name>
        </value>
    </entry>
    <entry>
        <key>Script File</key>
        <value>
            <name>Script File</name>
        </value>
    </entry>
    <entry>
        <key>Script Body</key>
        <value>
            <name>Script Body</name>
        </value>
    </entry>
    <entry>
        <key>Module Directory</key>
        <value>
            <name>Module Directory</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Script Engine</key>
        <value>python</value>
    </entry>
    <entry>
        <key>Script File</key>
    </entry>
    <entry>
        <key>Script Body</key>
        <value>"""
Generates a postgres table schema from flow results
"""

import json
import uuid
import re

JYTHON_AVAILABLE = True

try:
    # This is used in the NiFi ExecuteScript context
    import java.io  # pylint: disable=unused-import
    from org.apache.commons.io import IOUtils
    from java.nio.charset import StandardCharsets
    from org.apache.nifi.processor.io import StreamCallback
except ImportError:
    JYTHON_AVAILABLE = False
    print "Skipping Jython imports"


# Maximum identifier length supported in postgres
POSTGRES_MAX_IDENTIFIER_LENGTH = 63

# Geotypes appended words are '_altitude' and '_accuracy' of length 9
GEOTYPES_APPEND_WORD_LENGTH = 9

# Using a seed will allow UUID to be reproducible even in fail cases
FAIL_CASE_SEED = "i0em6a4qn"

# Accommodates the random string (_XXXX_) to be added to field_name
RANDOM_STRING_LENGTH = 6

# Mapping between FLOIP schema datatypes to corresponding sql datatypes
DATATYPE_MAPPING = {
    "date": "DATE",
    "time": "TIME",
    "datetime": "TIMESTAMP",
    "decimal": "DOUBLE PRECISION",
    "integer": "INTEGER",
    "select_one": "VARCHAR",
    "select_many": "VARCHAR",
    "open": "VARCHAR",
    "numeric": "DOUBLE PRECISION",
    "text": "VARCHAR",
    "calculate": "VARCHAR"
}


def remove_special_characters(name):
    """
    Function replaces special characters with an underscore.
    """

    name = re.sub(r"[-\\\(\),\.:;'\[\]\?\/\|{}\?&gt;&lt;!@#\$%\^&amp;\*\+ ]", '_', name)
    return name


def random_string_generator(field_name, retry_counter):
    """
    Function returns a random string with field_name as the seed.
    Incase the random string generated isn't unique, the seed used is a 
    predefined string called FAIL_CASE_SEED. This string is concatenated 
    to itself based on the number of retries. It is important to use a seed,
    so that the same random string can be reproduced.
    """

    if retry_counter == 0:
        random_string = str(uuid.uuid5(uuid.NAMESPACE_DNS,
                                       field_name.encode('utf-8')))
    else:
        new_fail_case_seed = FAIL_CASE_SEED * retry_counter
        random_string = str(uuid.uuid5(uuid.NAMESPACE_DNS,
                                       new_fail_case_seed.encode('utf-8')))
    return random_string[0:4]


def check_long_name(field_name, long_to_truncated_name_map,
                    appended_word_length=0):
    """Function shortens field_names longer than 63 characters"""
    retry_counter = 0
    find_shortened_field_name = True
    field_name_length = len(field_name)
    if (field_name_length + appended_word_length) &lt;= \
        POSTGRES_MAX_IDENTIFIER_LENGTH:
        return field_name, long_to_truncated_name_map
    else:
        truncation_length = field_name_length + appended_word_length \
                            + RANDOM_STRING_LENGTH\
                            - POSTGRES_MAX_IDENTIFIER_LENGTH
        random_string = random_string_generator(field_name, retry_counter)
        half_field_name_length = field_name_length // 2
        half_truncation_length = (truncation_length + 1) // 2

        while find_shortened_field_name:
            random_string = random_string_generator(field_name, retry_counter)
            shortened_field_name = "{a}_{b}_{c}".format(
                a = field_name[0:(half_field_name_length
                                  - half_truncation_length)],
                b = random_string,
                c = field_name[(half_field_name_length
                                + half_truncation_length):])
            if shortened_field_name not in long_to_truncated_name_map.values():
                find_shortened_field_name = False
            else:
                retry_counter += 1

        long_to_truncated_name_map[field_name] = shortened_field_name
    return shortened_field_name, long_to_truncated_name_map

def geopoint_field_to_type_string(field_name, long_to_truncated_name_map):
    """
    A geopoint has latitude, longitude, altitude and accuracy values.
    The column_name_type_string generated has a column_name and column_type
    for each of these.
    """

    processed_name, truncated_name_map = check_long_name(
        field_name, long_to_truncated_name_map, GEOTYPES_APPEND_WORD_LENGTH)
    column_name_type_string = \
    "_{a}{b} {c},_{a}{d} {c},_{a}{e} {c},_{a}{f} {c}".format(
        a = processed_name, 
        b = "_latitude",
        c = "DOUBLE PRECISION",
        d = "_longitude",
        e = "_altitude",
        f = "_accuracy")
    return column_name_type_string, truncated_name_map


def generate_table_statement(flow_results_package,
                                                    table_name):
    """
    Parses floip schema to identify column names and types and generate
    create table statement
    """

    questions = flow_results_package["data"]["attributes"]["resources"]\
        [0]["schema"]["questions"]

    # Table name can be user defined or in the absence of this, gotten from
    # the title atribute in the FLOIP schema
    table_name = table_name or remove_special_characters(
        flow_results_package["data"]["attributes"]["title"])
    table_columns = ["submission_uuid VARCHAR"]
    long_to_truncated_names_map = {}
    geopoints = []

    for key, value in questions.iteritems():
        column_name = remove_special_characters(key)
        if value.get("type") == "geo_point":
            column_name_type_string, truncated_name_map \
                = geopoint_field_to_type_string(column_name,
                long_to_truncated_names_map)
            geopoints.append(
                long_to_truncated_names_map.get(column_name) or column_name)
            table_columns.append(column_name_type_string)
        else:
            processed_name, truncated_name_map = check_long_name(
                column_name, long_to_truncated_names_map)
            table_columns.append("{} {}".format(
                processed_name, 
                DATATYPE_MAPPING[value.get("type")] or "VARCHAR"))

        long_to_truncated_names_map.update(truncated_name_map)

    table_statement = "CREATE TABLE {}({});".format(table_name,
                                                    ",".join(table_columns))
    return table_statement, long_to_truncated_names_map, geopoints

if JYTHON_AVAILABLE:
    # pylint:disable=too-few-public-methods,invalid-name,undefined-variable
    class PyStreamCallback(StreamCallback):
        """
        Class to handle flowFile stream maninpulation.
        """

        def __init__(self):
            self.long_field_names_map = {}
            self.table_statement = ""
            self.geopoints = []

        def process(self, inputStream, outputStream):
            """
            Takes a flowfile as an input and outputs the transformed flowfile
            """
            text = IOUtils.toString(inputStream, StandardCharsets.UTF_8)
            obj = json.loads(text)
            self.table_statement, self.long_field_names_map, self.geopoints = \
                generate_table_statement(survey_json or obj, tableName)

            outputStream.write(bytearray(
                json.dumps(self.table_statement, indent=4).encode('utf-8')))

    # session is provided by the NiFi ExecuteScript context
    flowFile = session.get()  # noqa
    if flowFile is not None:
        tableName = flowFile.getAttribute('table_name')
        survey_json = None
        if flowFile.getAttribute('survey'):
            survey_json = json.loads(flowFile.getAttribute('survey'))
        PROCESSED_DATA = PyStreamCallback()
        session.write(flowFile, PROCESSED_DATA)  # noqa
        ATTRMAP = {
            'table_statement': PROCESSED_DATA.table_statement,
            'geopoints': json.dumps(PROCESSED_DATA.geopoints),
            'long_field_names_map': json.dumps(
                PROCESSED_DATA.long_field_names_map)
        }
        flowFile = session.putAllAttributes(flowFile, ATTRMAP)  # noqa
        # # REL_SUCCESS is provided by the NiFi ExecuteScript context
        session.transfer(flowFile, REL_SUCCESS)  # noqa</value>
    </entry>
    <entry>
        <key>Module Directory</key>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ExecuteScript</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.script.ExecuteScript</type>
                        </processors>
                        <processors>
                            <id>b04104e3-3cae-3c16-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>1617.0033104688664</x>
<y>-470.89533344060834</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>6a898f0f-83bf-37b9-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>CREATE TABLE IF NOT EXISTS form_details(form_id VARCHAR PRIMARY KEY, form_version VARCHAR, table_name VARCHAR, date_added TIMESTAMP, token VARCHAR, metadata_details JSONB, geotypes JSONB, long_field_names_map JSONB, fields_to_name_label_map JSONB);</value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>SELECT EXISTS (SELECT * FROM form_details WHERE table_name = '${table_name}');</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ExecuteSQL</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>STOPPED</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>b484a9e5-04c7-3a09-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>1622.8441059273118</x>
<y>-119.86468043122647</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>HTTP Method</key>
        <value>
            <name>HTTP Method</name>
        </value>
    </entry>
    <entry>
        <key>Remote URL</key>
        <value>
            <name>Remote URL</name>
        </value>
    </entry>
    <entry>
        <key>SSL Context Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.ssl.SSLContextService</identifiesControllerService>
            <name>SSL Context Service</name>
        </value>
    </entry>
    <entry>
        <key>Connection Timeout</key>
        <value>
            <name>Connection Timeout</name>
        </value>
    </entry>
    <entry>
        <key>Read Timeout</key>
        <value>
            <name>Read Timeout</name>
        </value>
    </entry>
    <entry>
        <key>Include Date Header</key>
        <value>
            <name>Include Date Header</name>
        </value>
    </entry>
    <entry>
        <key>Follow Redirects</key>
        <value>
            <name>Follow Redirects</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Send</key>
        <value>
            <name>Attributes to Send</name>
        </value>
    </entry>
    <entry>
        <key>Basic Authentication Username</key>
        <value>
            <name>Basic Authentication Username</name>
        </value>
    </entry>
    <entry>
        <key>Basic Authentication Password</key>
        <value>
            <name>Basic Authentication Password</name>
        </value>
    </entry>
    <entry>
        <key>proxy-configuration-service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.proxy.ProxyConfigurationService</identifiesControllerService>
            <name>proxy-configuration-service</name>
        </value>
    </entry>
    <entry>
        <key>Proxy Host</key>
        <value>
            <name>Proxy Host</name>
        </value>
    </entry>
    <entry>
        <key>Proxy Port</key>
        <value>
            <name>Proxy Port</name>
        </value>
    </entry>
    <entry>
        <key>Proxy Type</key>
        <value>
            <name>Proxy Type</name>
        </value>
    </entry>
    <entry>
        <key>invokehttp-proxy-user</key>
        <value>
            <name>invokehttp-proxy-user</name>
        </value>
    </entry>
    <entry>
        <key>invokehttp-proxy-password</key>
        <value>
            <name>invokehttp-proxy-password</name>
        </value>
    </entry>
    <entry>
        <key>Put Response Body In Attribute</key>
        <value>
            <name>Put Response Body In Attribute</name>
        </value>
    </entry>
    <entry>
        <key>Max Length To Put In Attribute</key>
        <value>
            <name>Max Length To Put In Attribute</name>
        </value>
    </entry>
    <entry>
        <key>Digest Authentication</key>
        <value>
            <name>Digest Authentication</name>
        </value>
    </entry>
    <entry>
        <key>Always Output Response</key>
        <value>
            <name>Always Output Response</name>
        </value>
    </entry>
    <entry>
        <key>Trusted Hostname</key>
        <value>
            <name>Trusted Hostname</name>
        </value>
    </entry>
    <entry>
        <key>Add Response Headers to Request</key>
        <value>
            <name>Add Response Headers to Request</name>
        </value>
    </entry>
    <entry>
        <key>Content-Type</key>
        <value>
            <name>Content-Type</name>
        </value>
    </entry>
    <entry>
        <key>send-message-body</key>
        <value>
            <name>send-message-body</name>
        </value>
    </entry>
    <entry>
        <key>Use Chunked Encoding</key>
        <value>
            <name>Use Chunked Encoding</name>
        </value>
    </entry>
    <entry>
        <key>Penalize on "No Retry"</key>
        <value>
            <name>Penalize on "No Retry"</name>
        </value>
    </entry>
    <entry>
        <key>use-etag</key>
        <value>
            <name>use-etag</name>
        </value>
    </entry>
    <entry>
        <key>etag-max-cache-size</key>
        <value>
            <name>etag-max-cache-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>HTTP Method</key>
        <value>GET</value>
    </entry>
    <entry>
        <key>Remote URL</key>
        <value>${base_url}/flow-results/packages/${form_uuid}</value>
    </entry>
    <entry>
        <key>SSL Context Service</key>
    </entry>
    <entry>
        <key>Connection Timeout</key>
        <value>5 secs</value>
    </entry>
    <entry>
        <key>Read Timeout</key>
        <value>15 secs</value>
    </entry>
    <entry>
        <key>Include Date Header</key>
        <value>True</value>
    </entry>
    <entry>
        <key>Follow Redirects</key>
        <value>True</value>
    </entry>
    <entry>
        <key>Attributes to Send</key>
    </entry>
    <entry>
        <key>Basic Authentication Username</key>
    </entry>
    <entry>
        <key>Basic Authentication Password</key>
    </entry>
    <entry>
        <key>proxy-configuration-service</key>
    </entry>
    <entry>
        <key>Proxy Host</key>
    </entry>
    <entry>
        <key>Proxy Port</key>
    </entry>
    <entry>
        <key>Proxy Type</key>
        <value>http</value>
    </entry>
    <entry>
        <key>invokehttp-proxy-user</key>
    </entry>
    <entry>
        <key>invokehttp-proxy-password</key>
    </entry>
    <entry>
        <key>Put Response Body In Attribute</key>
    </entry>
    <entry>
        <key>Max Length To Put In Attribute</key>
        <value>256</value>
    </entry>
    <entry>
        <key>Digest Authentication</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Always Output Response</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Trusted Hostname</key>
        <value>api.ona.io</value>
    </entry>
    <entry>
        <key>Add Response Headers to Request</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Content-Type</key>
        <value>application/json</value>
    </entry>
    <entry>
        <key>send-message-body</key>
        <value>true</value>
    </entry>
    <entry>
        <key>Use Chunked Encoding</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Penalize on "No Retry"</key>
        <value>false</value>
    </entry>
    <entry>
        <key>use-etag</key>
        <value>false</value>
    </entry>
    <entry>
        <key>etag-max-cache-size</key>
        <value>10MB</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>InvokeHTTP</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>Failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>No Retry</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>Original</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>Response</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>Retry</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.InvokeHTTP</type>
                        </processors>
                        <processors>
                            <id>fbebecd2-2097-3d32-0000-000000000000</id>
                            <parentGroupId>f10ac1dd-99fa-3c65-0000-000000000000</parentGroupId>
                            <position>
<x>2079.588448863988</x>
<y>-300.4841328919471</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Routing Strategy</key>
        <value>
            <name>Routing Strategy</name>
        </value>
    </entry>
    <entry>
        <key>exists_json_feed</key>
        <value>
            <name>exists_json_feed</name>
        </value>
    </entry>
    <entry>
        <key>exists_uuid</key>
        <value>
            <name>exists_uuid</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Routing Strategy</key>
        <value>Route to Property name</value>
    </entry>
    <entry>
        <key>exists_json_feed</key>
        <value>${exists:equals('false'):and(${json_feed:equals('true')})}</value>
    </entry>
    <entry>
        <key>exists_uuid</key>
        <value>${exists:equals('false'):and(${form_uuid:notNull()})}</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>RouteOnAttribute</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>exists_json_feed</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>exists_uuid</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.RouteOnAttribute</type>
                        </processors>
                    </contents>
                    <name>Determine if Table Exists</name>
                    <variables/>
                </processGroups>
                <processGroups>
                    <id>fbc96b25-f8f3-3e6c-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>982.0748168152074</x>
                        <y>8.764392852782748</y>
                    </position>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>25c8b3b3-40c6-37be-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>fcd50585-916a-3197-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>5136957d-4e0e-3ca8-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>4407a730-de95-31fb-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>6171d544-0f60-3d2e-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>592856c0-a0cc-372a-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>463a7712-7d60-3962-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>bdd85843-9ea0-34cf-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>fcd50585-916a-3197-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>4b2beebf-5380-32ec-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>ca7fcfa6-e2ba-38d7-0000-000000000000</id>
<type>OUTPUT_PORT</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>bdd85843-9ea0-34cf-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>d167daad-e2d8-3fc7-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>592856c0-a0cc-372a-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>9e807c0b-1b7a-3452-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>daef03a2-4bbb-351a-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>5136957d-4e0e-3ca8-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>fbc96b25-f8f3-3e6c-0000-000000000000</groupId>
<id>6171d544-0f60-3d2e-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <outputPorts>
                            <id>ca7fcfa6-e2ba-38d7-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <position>
<x>102.2293655435002</x>
<y>198.83571688108833</y>
                            </position>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>Webhook submission</name>
                            <state>RUNNING</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>5136957d-4e0e-3ca8-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <position>
<x>554.4111587563908</x>
<y>-174.16428311891167</y>
                            </position>
                            <bundle>
<artifact>nifi-avro-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>JSON container options</key>
        <value>
            <name>JSON container options</name>
        </value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>
            <name>Wrap Single Record</name>
        </value>
    </entry>
    <entry>
        <key>Avro schema</key>
        <value>
            <name>Avro schema</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>JSON container options</key>
        <value>array</value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Avro schema</key>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ConvertAvroToJSON</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.avro.ConvertAvroToJSON</type>
                        </processors>
                        <processors>
                            <id>592856c0-a0cc-372a-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <position>
<x>552.1272449653974</x>
<y>-342.16422853265203</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Destination</key>
        <value>
            <name>Destination</name>
        </value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>
            <name>Return Type</name>
        </value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>
            <name>Path Not Found Behavior</name>
        </value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>
            <name>Null Value Representation</name>
        </value>
    </entry>
    <entry>
        <key>form_id</key>
        <value>
            <name>form_id</name>
        </value>
    </entry>
    <entry>
        <key>form_uuid</key>
        <value>
            <name>form_uuid</name>
        </value>
    </entry>
    <entry>
        <key>stream_submission_id</key>
        <value>
            <name>stream_submission_id</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Destination</key>
        <value>flowfile-attribute</value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>auto-detect</value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>ignore</value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>empty string</value>
    </entry>
    <entry>
        <key>form_id</key>
        <value>$._xform_id</value>
    </entry>
    <entry>
        <key>form_uuid</key>
        <value>$.formhub/uuid</value>
    </entry>
    <entry>
        <key>stream_submission_id</key>
        <value>$._uuid</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>EvaluateJsonPath</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                        </processors>
                        <processors>
                            <id>6171d544-0f60-3d2e-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <position>
<x>48.411189273968944</x>
<y>-176.16428311891167</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>6a898f0f-83bf-37b9-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>SELECT table_name, token, long_field_names_map, geotypes FROM form_details WHERE form_id = '${form_id}'; </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ExecuteSQL</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>9e807c0b-1b7a-3452-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <position>
<x>48.55834237750685</x>
<y>-341.032197282652</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Base Path</key>
        <value>
            <name>Base Path</name>
        </value>
    </entry>
    <entry>
        <key>Listening Port</key>
        <value>
            <name>Listening Port</name>
        </value>
    </entry>
    <entry>
        <key>Max Data to Receive per Second</key>
        <value>
            <name>Max Data to Receive per Second</name>
        </value>
    </entry>
    <entry>
        <key>SSL Context Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.ssl.RestrictedSSLContextService</identifiesControllerService>
            <name>SSL Context Service</name>
        </value>
    </entry>
    <entry>
        <key>Authorized DN Pattern</key>
        <value>
            <name>Authorized DN Pattern</name>
        </value>
    </entry>
    <entry>
        <key>Max Unconfirmed Flowfile Time</key>
        <value>
            <name>Max Unconfirmed Flowfile Time</name>
        </value>
    </entry>
    <entry>
        <key>HTTP Headers to receive as Attributes (Regex)</key>
        <value>
            <name>HTTP Headers to receive as Attributes (Regex)</name>
        </value>
    </entry>
    <entry>
        <key>Return Code</key>
        <value>
            <name>Return Code</name>
        </value>
    </entry>
    <entry>
        <key>multipart-request-max-size</key>
        <value>
            <name>multipart-request-max-size</name>
        </value>
    </entry>
    <entry>
        <key>multipart-read-buffer-size</key>
        <value>
            <name>multipart-read-buffer-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Base Path</key>
        <value>floip</value>
    </entry>
    <entry>
        <key>Listening Port</key>
        <value>9016</value>
    </entry>
    <entry>
        <key>Max Data to Receive per Second</key>
    </entry>
    <entry>
        <key>SSL Context Service</key>
    </entry>
    <entry>
        <key>Authorized DN Pattern</key>
        <value>.*</value>
    </entry>
    <entry>
        <key>Max Unconfirmed Flowfile Time</key>
        <value>60 secs</value>
    </entry>
    <entry>
        <key>HTTP Headers to receive as Attributes (Regex)</key>
    </entry>
    <entry>
        <key>Return Code</key>
        <value>200</value>
    </entry>
    <entry>
        <key>multipart-request-max-size</key>
        <value>1 MB</value>
    </entry>
    <entry>
        <key>multipart-read-buffer-size</key>
        <value>512 KB</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ListenHTTP</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ListenHTTP</type>
                        </processors>
                        <processors>
                            <id>bdd85843-9ea0-34cf-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <position>
<x>558.414607242719</x>
<y>2.3419272082367115</y>
                            </position>
                            <bundle>
<artifact>nifi-update-attribute-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Delete Attributes Expression</key>
        <value>
            <name>Delete Attributes Expression</name>
        </value>
    </entry>
    <entry>
        <key>Store State</key>
        <value>
            <name>Store State</name>
        </value>
    </entry>
    <entry>
        <key>Stateful Variables Initial Value</key>
        <value>
            <name>Stateful Variables Initial Value</name>
        </value>
    </entry>
    <entry>
        <key>canonical-value-lookup-cache-size</key>
        <value>
            <name>canonical-value-lookup-cache-size</name>
        </value>
    </entry>
    <entry>
        <key>live_stream</key>
        <value>
            <name>live_stream</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Delete Attributes Expression</key>
    </entry>
    <entry>
        <key>Store State</key>
        <value>Do not store state</value>
    </entry>
    <entry>
        <key>Stateful Variables Initial Value</key>
    </entry>
    <entry>
        <key>canonical-value-lookup-cache-size</key>
        <value>100</value>
    </entry>
    <entry>
        <key>live_stream</key>
        <value>true</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>UpdateAttribute</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.attributes.UpdateAttribute</type>
                        </processors>
                        <processors>
                            <id>fcd50585-916a-3197-0000-000000000000</id>
                            <parentGroupId>fbc96b25-f8f3-3e6c-0000-000000000000</parentGroupId>
                            <position>
<x>49.41115875639082</x>
<y>6.835716881088331</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Destination</key>
        <value>
            <name>Destination</name>
        </value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>
            <name>Return Type</name>
        </value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>
            <name>Path Not Found Behavior</name>
        </value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>
            <name>Null Value Representation</name>
        </value>
    </entry>
    <entry>
        <key>geopoints</key>
        <value>
            <name>geopoints</name>
        </value>
    </entry>
    <entry>
        <key>long_field_names_map</key>
        <value>
            <name>long_field_names_map</name>
        </value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>
            <name>table_name</name>
        </value>
    </entry>
    <entry>
        <key>token</key>
        <value>
            <name>token</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Destination</key>
        <value>flowfile-attribute</value>
    </entry>
    <entry>
        <key>Return Type</key>
        <value>auto-detect</value>
    </entry>
    <entry>
        <key>Path Not Found Behavior</key>
        <value>ignore</value>
    </entry>
    <entry>
        <key>Null Value Representation</key>
        <value>empty string</value>
    </entry>
    <entry>
        <key>geopoints</key>
        <value>$.geotypes</value>
    </entry>
    <entry>
        <key>long_field_names_map</key>
        <value>$.long_field_names_map</value>
    </entry>
    <entry>
        <key>table_name</key>
        <value>$.table_name</value>
    </entry>
    <entry>
        <key>token</key>
        <value>$.token</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>EvaluateJsonPath</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                        </processors>
                    </contents>
                    <name>Live stream</name>
                    <variables/>
                </processGroups>
                <processGroups>
                    <id>feaa6739-8a4d-376a-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1005.569274847542</x>
                        <y>814.4296386681798</y>
                    </position>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>089e56fb-9f6b-333f-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>2f31bb07-ded1-3f81-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>matched</selectedRelationships>
                            <source>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>54c10607-225e-3abb-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>8cbedf88-9c3f-36f2-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>430d21ae-c5ef-3f27-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>2f31bb07-ded1-3f81-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>c0fa0f84-0393-3448-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>f06679c6-0b8d-3217-0000-000000000000</id>
<type>OUTPUT_PORT</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>351549e9-0074-362f-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>e01326a7-e437-31e3-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>351549e9-0074-362f-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>430d21ae-c5ef-3f27-0000-000000000000</id>
<type>PROCESSOR</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>fddae5ae-ea24-3c39-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>54c10607-225e-3abb-0000-000000000000</id>
<type>PROCESSOR</type>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>feaa6739-8a4d-376a-0000-000000000000</groupId>
<id>550d83c3-8f40-3e4f-0000-000000000000</id>
<type>INPUT_PORT</type>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <inputPorts>
                            <id>550d83c3-8f40-3e4f-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <position>
<x>403.99999966369614</x>
<y>32.00000646135081</y>
                            </position>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>Row_data</name>
                            <state>RUNNING</state>
                            <type>INPUT_PORT</type>
                        </inputPorts>
                        <outputPorts>
                            <id>f06679c6-0b8d-3217-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <position>
<x>876.999969146118</x>
<y>354.00000264665357</y>
                            </position>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>row data</name>
                            <state>RUNNING</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>2f31bb07-ded1-3f81-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <position>
<x>335.9999996636961</x>
<y>148.00000264665357</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>6a898f0f-83bf-37b9-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>INSERT INTO raw_${table_name} VALUES('${row_id}', '${submission_id}', '${row_details:replace("'", '')}');</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ExecuteSQL</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>351549e9-0074-362f-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <position>
<x>335.151466033325</x>
<y>314.9393642189192</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Regular Expression</key>
        <value>
            <name>Regular Expression</name>
        </value>
    </entry>
    <entry>
        <key>Replacement Value</key>
        <value>
            <name>Replacement Value</name>
        </value>
    </entry>
    <entry>
        <key>Character Set</key>
        <value>
            <name>Character Set</name>
        </value>
    </entry>
    <entry>
        <key>Maximum Buffer Size</key>
        <value>
            <name>Maximum Buffer Size</name>
        </value>
    </entry>
    <entry>
        <key>Replacement Strategy</key>
        <value>
            <name>Replacement Strategy</name>
        </value>
    </entry>
    <entry>
        <key>Evaluation Mode</key>
        <value>
            <name>Evaluation Mode</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Regular Expression</key>
        <value>(?s)(^.*$)</value>
    </entry>
    <entry>
        <key>Replacement Value</key>
        <value>${row_details}</value>
    </entry>
    <entry>
        <key>Character Set</key>
        <value>UTF-8</value>
    </entry>
    <entry>
        <key>Maximum Buffer Size</key>
        <value>1 MB</value>
    </entry>
    <entry>
        <key>Replacement Strategy</key>
        <value>Regex Replace</value>
    </entry>
    <entry>
        <key>Evaluation Mode</key>
        <value>Entire text</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ReplaceText</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ReplaceText</type>
                        </processors>
                        <processors>
                            <id>430d21ae-c5ef-3f27-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <position>
<x>826.6969143365477</x>
<y>150.0303066017317</y>
                            </position>
                            <bundle>
<artifact>nifi-avro-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>JSON container options</key>
        <value>
            <name>JSON container options</name>
        </value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>
            <name>Wrap Single Record</name>
        </value>
    </entry>
    <entry>
        <key>Avro schema</key>
        <value>
            <name>Avro schema</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>JSON container options</key>
        <value>array</value>
    </entry>
    <entry>
        <key>Wrap Single Record</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Avro schema</key>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ConvertAvroToJSON</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>failure</name>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.avro.ConvertAvroToJSON</type>
                        </processors>
                        <processors>
                            <id>54c10607-225e-3abb-0000-000000000000</id>
                            <parentGroupId>feaa6739-8a4d-376a-0000-000000000000</parentGroupId>
                            <position>
<x>825.9999996636961</x>
<y>-11.999993538649193</y>
                            </position>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.9.2</version>
                            </bundle>
                            <config>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Character Set</key>
        <value>
            <name>Character Set</name>
        </value>
    </entry>
    <entry>
        <key>Maximum Buffer Size</key>
        <value>
            <name>Maximum Buffer Size</name>
        </value>
    </entry>
    <entry>
        <key>Maximum Capture Group Length</key>
        <value>
            <name>Maximum Capture Group Length</name>
        </value>
    </entry>
    <entry>
        <key>Enable Canonical Equivalence</key>
        <value>
            <name>Enable Canonical Equivalence</name>
        </value>
    </entry>
    <entry>
        <key>Enable Case-insensitive Matching</key>
        <value>
            <name>Enable Case-insensitive Matching</name>
        </value>
    </entry>
    <entry>
        <key>Permit Whitespace and Comments in Pattern</key>
        <value>
            <name>Permit Whitespace and Comments in Pattern</name>
        </value>
    </entry>
    <entry>
        <key>Enable DOTALL Mode</key>
        <value>
            <name>Enable DOTALL Mode</name>
        </value>
    </entry>
    <entry>
        <key>Enable Literal Parsing of the Pattern</key>
        <value>
            <name>Enable Literal Parsing of the Pattern</name>
        </value>
    </entry>
    <entry>
        <key>Enable Multiline Mode</key>
        <value>
            <name>Enable Multiline Mode</name>
        </value>
    </entry>
    <entry>
        <key>Enable Unicode-aware Case Folding</key>
        <value>
            <name>Enable Unicode-aware Case Folding</name>
        </value>
    </entry>
    <entry>
        <key>Enable Unicode Predefined Character Classes</key>
        <value>
            <name>Enable Unicode Predefined Character Classes</name>
        </value>
    </entry>
    <entry>
        <key>Enable Unix Lines Mode</key>
        <value>
            <name>Enable Unix Lines Mode</name>
        </value>
    </entry>
    <entry>
        <key>Include Capture Group 0</key>
        <value>
            <name>Include Capture Group 0</name>
        </value>
    </entry>
    <entry>
        <key>extract-text-enable-repeating-capture-group</key>
        <value>
            <name>extract-text-enable-repeating-capture-group</name>
        </value>
    </entry>
    <entry>
        <key>row_details</key>
        <value>
            <name>row_details</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Character Set</key>
        <value>UTF-8</value>
    </entry>
    <entry>
        <key>Maximum Buffer Size</key>
        <value>1 MB</value>
    </entry>
    <entry>
        <key>Maximum Capture Group Length</key>
        <value>1024</value>
    </entry>
    <entry>
        <key>Enable Canonical Equivalence</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Enable Case-insensitive Matching</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Permit Whitespace and Comments in Pattern</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Enable DOTALL Mode</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Enable Literal Parsing of the Pattern</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Enable Multiline Mode</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Enable Unicode-aware Case Folding</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Enable Unicode Predefined Character Classes</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Enable Unix Lines Mode</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Include Capture Group 0</key>
        <value>true</value>
    </entry>
    <entry>
        <key>extract-text-enable-repeating-capture-group</key>
        <value>false</value>
    </entry>
    <entry>
        <key>row_details</key>
        <value>(?s)(^.*$)</value>
    </entry>
</properties>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>ExtractText</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>matched</name>
                            </relationships>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>unmatched</name>
                            </relationships>
                            <state>RUNNING</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.ExtractText</type>
                        </processors>
                    </contents>
                    <name>Insert raw format data</name>
                    <variables/>
                </processGroups>
                <processors>
                    <id>032983a0-d856-34de-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1013.928519360374</x>
                        <y>1581.770577430725</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>JDBC Connection Pool</key>
<value>
    <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
    <name>JDBC Connection Pool</name>
</value>
                            </entry>
                            <entry>
<key>Statement Type</key>
<value>
    <name>Statement Type</name>
</value>
                            </entry>
                            <entry>
<key>Table Name</key>
<value>
    <name>Table Name</name>
</value>
                            </entry>
                            <entry>
<key>Catalog Name</key>
<value>
    <name>Catalog Name</name>
</value>
                            </entry>
                            <entry>
<key>Schema Name</key>
<value>
    <name>Schema Name</name>
</value>
                            </entry>
                            <entry>
<key>Translate Field Names</key>
<value>
    <name>Translate Field Names</name>
</value>
                            </entry>
                            <entry>
<key>Unmatched Field Behavior</key>
<value>
    <name>Unmatched Field Behavior</name>
</value>
                            </entry>
                            <entry>
<key>Unmatched Column Behavior</key>
<value>
    <name>Unmatched Column Behavior</name>
</value>
                            </entry>
                            <entry>
<key>Update Keys</key>
<value>
    <name>Update Keys</name>
</value>
                            </entry>
                            <entry>
<key>jts-quoted-identifiers</key>
<value>
    <name>jts-quoted-identifiers</name>
</value>
                            </entry>
                            <entry>
<key>jts-quoted-table-identifiers</key>
<value>
    <name>jts-quoted-table-identifiers</name>
</value>
                            </entry>
                            <entry>
<key>jts-sql-param-attr-prefix</key>
<value>
    <name>jts-sql-param-attr-prefix</name>
</value>
                            </entry>
                            <entry>
<key>table-schema-cache-size</key>
<value>
    <name>table-schema-cache-size</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>JDBC Connection Pool</key>
<value>6a898f0f-83bf-37b9-0000-000000000000</value>
                            </entry>
                            <entry>
<key>Statement Type</key>
<value>INSERT</value>
                            </entry>
                            <entry>
<key>Table Name</key>
<value>${table_name}</value>
                            </entry>
                            <entry>
<key>Catalog Name</key>
                            </entry>
                            <entry>
<key>Schema Name</key>
                            </entry>
                            <entry>
<key>Translate Field Names</key>
<value>true</value>
                            </entry>
                            <entry>
<key>Unmatched Field Behavior</key>
<value>Ignore Unmatched Fields</value>
                            </entry>
                            <entry>
<key>Unmatched Column Behavior</key>
<value>Fail on Unmatched Columns</value>
                            </entry>
                            <entry>
<key>Update Keys</key>
                            </entry>
                            <entry>
<key>jts-quoted-identifiers</key>
<value>false</value>
                            </entry>
                            <entry>
<key>jts-quoted-table-identifiers</key>
<value>false</value>
                            </entry>
                            <entry>
<key>jts-sql-param-attr-prefix</key>
<value>sql</value>
                            </entry>
                            <entry>
<key>table-schema-cache-size</key>
<value>0</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>ConvertJSONToSQL</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>original</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>sql</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.ConvertJSONToSQL</type>
                </processors>
                <processors>
                    <id>10b6b4d8-d093-32f0-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1013.2963435427454</x>
                        <y>467.12056470332413</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Regular Expression</key>
<value>
    <name>Regular Expression</name>
</value>
                            </entry>
                            <entry>
<key>Replacement Value</key>
<value>
    <name>Replacement Value</name>
</value>
                            </entry>
                            <entry>
<key>Character Set</key>
<value>
    <name>Character Set</name>
</value>
                            </entry>
                            <entry>
<key>Maximum Buffer Size</key>
<value>
    <name>Maximum Buffer Size</name>
</value>
                            </entry>
                            <entry>
<key>Replacement Strategy</key>
<value>
    <name>Replacement Strategy</name>
</value>
                            </entry>
                            <entry>
<key>Evaluation Mode</key>
<value>
    <name>Evaluation Mode</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Regular Expression</key>
<value>(?s)(^.*$)</value>
                            </entry>
                            <entry>
<key>Replacement Value</key>
<value>{"data": ${response:jsonPath('$.data.attributes')}}</value>
                            </entry>
                            <entry>
<key>Character Set</key>
<value>UTF-8</value>
                            </entry>
                            <entry>
<key>Maximum Buffer Size</key>
<value>1 MB</value>
                            </entry>
                            <entry>
<key>Replacement Strategy</key>
<value>Regex Replace</value>
                            </entry>
                            <entry>
<key>Evaluation Mode</key>
<value>Entire text</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>ReplaceText</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.ReplaceText</type>
                </processors>
                <processors>
                    <id>19fdf37a-9a1e-35b9-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>485.2926818054433</x>
                        <y>1013.6958215713504</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Merge Strategy</key>
<value>
    <name>Merge Strategy</name>
</value>
                            </entry>
                            <entry>
<key>Merge Format</key>
<value>
    <name>Merge Format</name>
</value>
                            </entry>
                            <entry>
<key>Attribute Strategy</key>
<value>
    <name>Attribute Strategy</name>
</value>
                            </entry>
                            <entry>
<key>Correlation Attribute Name</key>
<value>
    <name>Correlation Attribute Name</name>
</value>
                            </entry>
                            <entry>
<key>mergecontent-metadata-strategy</key>
<value>
    <name>mergecontent-metadata-strategy</name>
</value>
                            </entry>
                            <entry>
<key>Minimum Number of Entries</key>
<value>
    <name>Minimum Number of Entries</name>
</value>
                            </entry>
                            <entry>
<key>Maximum Number of Entries</key>
<value>
    <name>Maximum Number of Entries</name>
</value>
                            </entry>
                            <entry>
<key>Minimum Group Size</key>
<value>
    <name>Minimum Group Size</name>
</value>
                            </entry>
                            <entry>
<key>Maximum Group Size</key>
<value>
    <name>Maximum Group Size</name>
</value>
                            </entry>
                            <entry>
<key>Max Bin Age</key>
<value>
    <name>Max Bin Age</name>
</value>
                            </entry>
                            <entry>
<key>Maximum number of Bins</key>
<value>
    <name>Maximum number of Bins</name>
</value>
                            </entry>
                            <entry>
<key>Delimiter Strategy</key>
<value>
    <name>Delimiter Strategy</name>
</value>
                            </entry>
                            <entry>
<key>Header File</key>
<value>
    <name>Header File</name>
</value>
                            </entry>
                            <entry>
<key>Footer File</key>
<value>
    <name>Footer File</name>
</value>
                            </entry>
                            <entry>
<key>Demarcator File</key>
<value>
    <name>Demarcator File</name>
</value>
                            </entry>
                            <entry>
<key>Compression Level</key>
<value>
    <name>Compression Level</name>
</value>
                            </entry>
                            <entry>
<key>Keep Path</key>
<value>
    <name>Keep Path</name>
</value>
                            </entry>
                            <entry>
<key>Tar Modified Time</key>
<value>
    <name>Tar Modified Time</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Merge Strategy</key>
<value>Bin-Packing Algorithm</value>
                            </entry>
                            <entry>
<key>Merge Format</key>
<value>Binary Concatenation</value>
                            </entry>
                            <entry>
<key>Attribute Strategy</key>
<value>Keep Only Common Attributes</value>
                            </entry>
                            <entry>
<key>Correlation Attribute Name</key>
<value>submission_id</value>
                            </entry>
                            <entry>
<key>mergecontent-metadata-strategy</key>
<value>Do Not Merge Uncommon Metadata</value>
                            </entry>
                            <entry>
<key>Minimum Number of Entries</key>
<value>1</value>
                            </entry>
                            <entry>
<key>Maximum Number of Entries</key>
<value>1000</value>
                            </entry>
                            <entry>
<key>Minimum Group Size</key>
<value>0 B</value>
                            </entry>
                            <entry>
<key>Maximum Group Size</key>
                            </entry>
                            <entry>
<key>Max Bin Age</key>
                            </entry>
                            <entry>
<key>Maximum number of Bins</key>
<value>100000</value>
                            </entry>
                            <entry>
<key>Delimiter Strategy</key>
<value>Text</value>
                            </entry>
                            <entry>
<key>Header File</key>
                            </entry>
                            <entry>
<key>Footer File</key>
                            </entry>
                            <entry>
<key>Demarcator File</key>
<value>,</value>
                            </entry>
                            <entry>
<key>Compression Level</key>
<value>1</value>
                            </entry>
                            <entry>
<key>Keep Path</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Tar Modified Time</key>
<value>${file.lastModifiedTime}</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>MergeContent</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>merged</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>original</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.MergeContent</type>
                </processors>
                <processors>
                    <id>1f1a9733-50c6-31b6-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>482.2848691337696</x>
                        <y>638.1330140138003</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>JsonPath Expression</key>
<value>
    <name>JsonPath Expression</name>
</value>
                            </entry>
                            <entry>
<key>Null Value Representation</key>
<value>
    <name>Null Value Representation</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>JsonPath Expression</key>
<value>$.data.responses</value>
                            </entry>
                            <entry>
<key>Null Value Representation</key>
<value>empty string</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>SplitJson</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>original</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>split</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.SplitJson</type>
                </processors>
                <processors>
                    <id>222936b3-b271-3842-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1007.7303069275137</x>
                        <y>640.8763414382938</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Destination</key>
<value>
    <name>Destination</name>
</value>
                            </entry>
                            <entry>
<key>Return Type</key>
<value>
    <name>Return Type</name>
</value>
                            </entry>
                            <entry>
<key>Path Not Found Behavior</key>
<value>
    <name>Path Not Found Behavior</name>
</value>
                            </entry>
                            <entry>
<key>Null Value Representation</key>
<value>
    <name>Null Value Representation</name>
</value>
                            </entry>
                            <entry>
<key>row_id</key>
<value>
    <name>row_id</name>
</value>
                            </entry>
                            <entry>
<key>submission_id</key>
<value>
    <name>submission_id</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Destination</key>
<value>flowfile-attribute</value>
                            </entry>
                            <entry>
<key>Return Type</key>
<value>auto-detect</value>
                            </entry>
                            <entry>
<key>Path Not Found Behavior</key>
<value>ignore</value>
                            </entry>
                            <entry>
<key>Null Value Representation</key>
<value>empty string</value>
                            </entry>
                            <entry>
<key>row_id</key>
<value>$.[1]</value>
                            </entry>
                            <entry>
<key>submission_id</key>
<value>$.[3]</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>EvaluateJsonPath</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>matched</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>unmatched</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.EvaluateJsonPath</type>
                </processors>
                <processors>
                    <id>26f2df61-c37a-33a5-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1007.286306869837</x>
                        <y>274.09456634267485</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Routing Strategy</key>
<value>
    <name>Routing Strategy</name>
</value>
                            </entry>
                            <entry>
<key>form_uuid</key>
<value>
    <name>form_uuid</name>
</value>
                            </entry>
                            <entry>
<key>json_feed</key>
<value>
    <name>json_feed</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Routing Strategy</key>
<value>Route to Property name</value>
                            </entry>
                            <entry>
<key>form_uuid</key>
<value>${form_uuid:notNull()}</value>
                            </entry>
                            <entry>
<key>json_feed</key>
<value>${json_feed:equals('true')}</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>RouteOnAttribute</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>form_uuid</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>json_feed</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>unmatched</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.RouteOnAttribute</type>
                </processors>
                <processors>
                    <id>29c3f335-314b-37f7-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>490.0959006469951</x>
                        <y>1210.5152673721313</y>
                    </position>
                    <bundle>
                        <artifact>nifi-scripting-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Script Engine</key>
<value>
    <name>Script Engine</name>
</value>
                            </entry>
                            <entry>
<key>Script File</key>
<value>
    <name>Script File</name>
</value>
                            </entry>
                            <entry>
<key>Script Body</key>
<value>
    <name>Script Body</name>
</value>
                            </entry>
                            <entry>
<key>Module Directory</key>
<value>
    <name>Module Directory</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Script Engine</key>
<value>python</value>
                            </entry>
                            <entry>
<key>Script File</key>
                            </entry>
                            <entry>
<key>Script Body</key>
<value>"""
Transforms flow results format data from Ona API and creates a flattened
list of submissions as a dictionary.
"""
import json
import re
JYTHON_AVAILABLE = True

try:
    # This is used in the NiFi ExecuteScript context
    import java.io  # pylint: disable=unused-import
    from java.nio.charset import StandardCharsets
    from org.apache.commons.io import IOUtils
    from org.apache.nifi.processor.io import StreamCallback
except ImportError:
    JYTHON_AVAILABLE = False
    print "Skipping Jython imports"

# pylint: disable = redefined-outer-name
def transform_flow_results(data, submission_id, long_field_names_map):
    """
    Funtion to format flow results package data to flattened JSON for each
    submission and return a list of dictionaries.
    """
    transformed_data = {"submission_uuid": submission_id}

    for i in data:
        transformed_data[long_field_names_map.get(i[4]) or i[4]] = i[5]

    return transformed_data

if JYTHON_AVAILABLE:
    # pylint:disable=too-few-public-methods,invalid-name,no-self-use
    class PyStreamCallback(StreamCallback):
        """
        Class to handle flowFile stream maninpulation.
        """
        def __init__(self):
            pass

        def process(self, inputStream, outputStream):  # noqa
            """
            Takes a flowfile as an input and outputs the transform flowfile
            """
            text = IOUtils.toString(inputStream, StandardCharsets.UTF_8)  # noqa
            data = json.loads("[{}]".format(text))
            transformed_data = transform_flow_results(data,
                                                      submission_id,
                                                      long_field_names_map)

            outputStream.write(
                bytearray(json.dumps(transformed_data, indent=4).
                          encode('utf-8')))

    # session is provided by the NiFi ExecuteScript context
    # pylint:disable=undefined-variable
    flowFile = session.get()  # noqa

    if flowFile is not None:
        long_field_names_map = json.loads(
            flowFile.getAttribute("long_field_names_map"))
        submission_id = flowFile.getAttribute("submission_id")
        flowFile = session.putAttribute(flowFile, 'Content-Type',
                                        'application/json')
        flowFile = session.putAttribute(flowFile, 'mime.type',
                                        'application/json')
        session.write(flowFile, PyStreamCallback())
        session.transfer(flowFile, REL_SUCCESS)  # noqa</value>
                            </entry>
                            <entry>
<key>Module Directory</key>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>Transform flow responses into dictionary</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.script.ExecuteScript</type>
                </processors>
                <processors>
                    <id>38e3753d-3f42-31be-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>484.02236854250293</x>
                        <y>463.68169116973877</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>HTTP Method</key>
<value>
    <name>HTTP Method</name>
</value>
                            </entry>
                            <entry>
<key>Remote URL</key>
<value>
    <name>Remote URL</name>
</value>
                            </entry>
                            <entry>
<key>SSL Context Service</key>
<value>
    <identifiesControllerService>org.apache.nifi.ssl.SSLContextService</identifiesControllerService>
    <name>SSL Context Service</name>
</value>
                            </entry>
                            <entry>
<key>Connection Timeout</key>
<value>
    <name>Connection Timeout</name>
</value>
                            </entry>
                            <entry>
<key>Read Timeout</key>
<value>
    <name>Read Timeout</name>
</value>
                            </entry>
                            <entry>
<key>Include Date Header</key>
<value>
    <name>Include Date Header</name>
</value>
                            </entry>
                            <entry>
<key>Follow Redirects</key>
<value>
    <name>Follow Redirects</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Send</key>
<value>
    <name>Attributes to Send</name>
</value>
                            </entry>
                            <entry>
<key>Basic Authentication Username</key>
<value>
    <name>Basic Authentication Username</name>
</value>
                            </entry>
                            <entry>
<key>Basic Authentication Password</key>
<value>
    <name>Basic Authentication Password</name>
</value>
                            </entry>
                            <entry>
<key>proxy-configuration-service</key>
<value>
    <identifiesControllerService>org.apache.nifi.proxy.ProxyConfigurationService</identifiesControllerService>
    <name>proxy-configuration-service</name>
</value>
                            </entry>
                            <entry>
<key>Proxy Host</key>
<value>
    <name>Proxy Host</name>
</value>
                            </entry>
                            <entry>
<key>Proxy Port</key>
<value>
    <name>Proxy Port</name>
</value>
                            </entry>
                            <entry>
<key>Proxy Type</key>
<value>
    <name>Proxy Type</name>
</value>
                            </entry>
                            <entry>
<key>invokehttp-proxy-user</key>
<value>
    <name>invokehttp-proxy-user</name>
</value>
                            </entry>
                            <entry>
<key>invokehttp-proxy-password</key>
<value>
    <name>invokehttp-proxy-password</name>
</value>
                            </entry>
                            <entry>
<key>Put Response Body In Attribute</key>
<value>
    <name>Put Response Body In Attribute</name>
</value>
                            </entry>
                            <entry>
<key>Max Length To Put In Attribute</key>
<value>
    <name>Max Length To Put In Attribute</name>
</value>
                            </entry>
                            <entry>
<key>Digest Authentication</key>
<value>
    <name>Digest Authentication</name>
</value>
                            </entry>
                            <entry>
<key>Always Output Response</key>
<value>
    <name>Always Output Response</name>
</value>
                            </entry>
                            <entry>
<key>Trusted Hostname</key>
<value>
    <name>Trusted Hostname</name>
</value>
                            </entry>
                            <entry>
<key>Add Response Headers to Request</key>
<value>
    <name>Add Response Headers to Request</name>
</value>
                            </entry>
                            <entry>
<key>Content-Type</key>
<value>
    <name>Content-Type</name>
</value>
                            </entry>
                            <entry>
<key>send-message-body</key>
<value>
    <name>send-message-body</name>
</value>
                            </entry>
                            <entry>
<key>Use Chunked Encoding</key>
<value>
    <name>Use Chunked Encoding</name>
</value>
                            </entry>
                            <entry>
<key>Penalize on "No Retry"</key>
<value>
    <name>Penalize on "No Retry"</name>
</value>
                            </entry>
                            <entry>
<key>use-etag</key>
<value>
    <name>use-etag</name>
</value>
                            </entry>
                            <entry>
<key>etag-max-cache-size</key>
<value>
    <name>etag-max-cache-size</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>HTTP Method</key>
<value>GET</value>
                            </entry>
                            <entry>
<key>Remote URL</key>
<value>${base_url}/flow-results/packages/${form_uuid}/responses</value>
                            </entry>
                            <entry>
<key>SSL Context Service</key>
                            </entry>
                            <entry>
<key>Connection Timeout</key>
<value>5 secs</value>
                            </entry>
                            <entry>
<key>Read Timeout</key>
<value>15 secs</value>
                            </entry>
                            <entry>
<key>Include Date Header</key>
<value>True</value>
                            </entry>
                            <entry>
<key>Follow Redirects</key>
<value>True</value>
                            </entry>
                            <entry>
<key>Attributes to Send</key>
                            </entry>
                            <entry>
<key>Basic Authentication Username</key>
                            </entry>
                            <entry>
<key>Basic Authentication Password</key>
                            </entry>
                            <entry>
<key>proxy-configuration-service</key>
                            </entry>
                            <entry>
<key>Proxy Host</key>
                            </entry>
                            <entry>
<key>Proxy Port</key>
                            </entry>
                            <entry>
<key>Proxy Type</key>
<value>http</value>
                            </entry>
                            <entry>
<key>invokehttp-proxy-user</key>
                            </entry>
                            <entry>
<key>invokehttp-proxy-password</key>
                            </entry>
                            <entry>
<key>Put Response Body In Attribute</key>
                            </entry>
                            <entry>
<key>Max Length To Put In Attribute</key>
<value>256</value>
                            </entry>
                            <entry>
<key>Digest Authentication</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Always Output Response</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Trusted Hostname</key>
<value>api.ona.io</value>
                            </entry>
                            <entry>
<key>Add Response Headers to Request</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Content-Type</key>
<value>application/json</value>
                            </entry>
                            <entry>
<key>send-message-body</key>
<value>true</value>
                            </entry>
                            <entry>
<key>Use Chunked Encoding</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Penalize on "No Retry"</key>
<value>false</value>
                            </entry>
                            <entry>
<key>use-etag</key>
<value>false</value>
                            </entry>
                            <entry>
<key>etag-max-cache-size</key>
<value>10MB</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>InvokeHTTP</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>Failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>No Retry</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>Original</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>Response</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>Retry</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.InvokeHTTP</type>
                </processors>
                <processors>
                    <id>554ddd26-af4e-3e42-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>512.0094824951397</x>
                        <y>1793.7242517471313</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Log Level</key>
<value>
    <name>Log Level</name>
</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>
    <name>Log Payload</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
<value>
    <name>Attributes to Log</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>
    <name>attributes-to-log-regex</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
<value>
    <name>Attributes to Ignore</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
<value>
    <name>attributes-to-ignore-regex</name>
</value>
                            </entry>
                            <entry>
<key>Log prefix</key>
<value>
    <name>Log prefix</name>
</value>
                            </entry>
                            <entry>
<key>character-set</key>
<value>
    <name>character-set</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Log Level</key>
<value>info</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>.*</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
                            </entry>
                            <entry>
<key>Log prefix</key>
                            </entry>
                            <entry>
<key>character-set</key>
<value>UTF-8</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>LogAttribute</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>STOPPED</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.LogAttribute</type>
                </processors>
                <processors>
                    <id>6141dc81-b918-3c96-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>487.5582038086162</x>
                        <y>1581.8831872940063</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>JDBC Connection Pool</key>
<value>
    <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
    <name>JDBC Connection Pool</name>
</value>
                            </entry>
                            <entry>
<key>putsql-sql-statement</key>
<value>
    <name>putsql-sql-statement</name>
</value>
                            </entry>
                            <entry>
<key>Support Fragmented Transactions</key>
<value>
    <name>Support Fragmented Transactions</name>
</value>
                            </entry>
                            <entry>
<key>database-session-autocommit</key>
<value>
    <name>database-session-autocommit</name>
</value>
                            </entry>
                            <entry>
<key>Transaction Timeout</key>
<value>
    <name>Transaction Timeout</name>
</value>
                            </entry>
                            <entry>
<key>Batch Size</key>
<value>
    <name>Batch Size</name>
</value>
                            </entry>
                            <entry>
<key>Obtain Generated Keys</key>
<value>
    <name>Obtain Generated Keys</name>
</value>
                            </entry>
                            <entry>
<key>rollback-on-failure</key>
<value>
    <name>rollback-on-failure</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>JDBC Connection Pool</key>
<value>6a898f0f-83bf-37b9-0000-000000000000</value>
                            </entry>
                            <entry>
<key>putsql-sql-statement</key>
                            </entry>
                            <entry>
<key>Support Fragmented Transactions</key>
<value>true</value>
                            </entry>
                            <entry>
<key>database-session-autocommit</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Transaction Timeout</key>
                            </entry>
                            <entry>
<key>Batch Size</key>
<value>100</value>
                            </entry>
                            <entry>
<key>Obtain Generated Keys</key>
<value>false</value>
                            </entry>
                            <entry>
<key>rollback-on-failure</key>
<value>false</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>PutSQL</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>retry</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.PutSQL</type>
                </processors>
                <processors>
                    <id>9da2c687-fe4f-311b-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1001.309378735374</x>
                        <y>1807.3643884658813</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Log Level</key>
<value>
    <name>Log Level</name>
</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>
    <name>Log Payload</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
<value>
    <name>Attributes to Log</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>
    <name>attributes-to-log-regex</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
<value>
    <name>Attributes to Ignore</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
<value>
    <name>attributes-to-ignore-regex</name>
</value>
                            </entry>
                            <entry>
<key>Log prefix</key>
<value>
    <name>Log prefix</name>
</value>
                            </entry>
                            <entry>
<key>character-set</key>
<value>
    <name>character-set</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Log Level</key>
<value>info</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>.*</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
                            </entry>
                            <entry>
<key>Log prefix</key>
                            </entry>
                            <entry>
<key>character-set</key>
<value>UTF-8</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>LogAttribute</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>STOPPED</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.LogAttribute</type>
                </processors>
                <processors>
                    <id>a4a8760e-5c56-3e1f-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1008.2272210281589</x>
                        <y>1014.9548883438105</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Regular Expression</key>
<value>
    <name>Regular Expression</name>
</value>
                            </entry>
                            <entry>
<key>Replacement Value</key>
<value>
    <name>Replacement Value</name>
</value>
                            </entry>
                            <entry>
<key>Character Set</key>
<value>
    <name>Character Set</name>
</value>
                            </entry>
                            <entry>
<key>Maximum Buffer Size</key>
<value>
    <name>Maximum Buffer Size</name>
</value>
                            </entry>
                            <entry>
<key>Replacement Strategy</key>
<value>
    <name>Replacement Strategy</name>
</value>
                            </entry>
                            <entry>
<key>Evaluation Mode</key>
<value>
    <name>Evaluation Mode</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Regular Expression</key>
<value>’</value>
                            </entry>
                            <entry>
<key>Replacement Value</key>
<value></value>
                            </entry>
                            <entry>
<key>Character Set</key>
<value>UTF-8</value>
                            </entry>
                            <entry>
<key>Maximum Buffer Size</key>
<value>1 MB</value>
                            </entry>
                            <entry>
<key>Replacement Strategy</key>
<value>Regex Replace</value>
                            </entry>
                            <entry>
<key>Evaluation Mode</key>
<value>Entire text</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>ReplaceText</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.ReplaceText</type>
                </processors>
                <processors>
                    <id>a75fad17-f73c-3964-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>481.954867474387</x>
                        <y>810.8438089370724</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Routing Strategy</key>
<value>
    <name>Routing Strategy</name>
</value>
                            </entry>
                            <entry>
<key>batch_pulls</key>
<value>
    <name>batch_pulls</name>
</value>
                            </entry>
                            <entry>
<key>webhook_data</key>
<value>
    <name>webhook_data</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Routing Strategy</key>
<value>Route to Property name</value>
                            </entry>
                            <entry>
<key>batch_pulls</key>
<value>${live_stream:equals('true'):not()}</value>
                            </entry>
                            <entry>
<key>webhook_data</key>
<value>${live_stream:equals('true'):and(${submission_id:equals(${stream_submission_id})})}</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>RouteOnAttribute</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>batch_pulls</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>unmatched</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>webhook_data</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.RouteOnAttribute</type>
                </processors>
                <processors>
                    <id>d297a8d9-e714-3d8e-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1014.1766031409287</x>
                        <y>1199.0617206273905</y>
                    </position>
                    <bundle>
                        <artifact>nifi-scripting-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Script Engine</key>
<value>
    <name>Script Engine</name>
</value>
                            </entry>
                            <entry>
<key>Script File</key>
<value>
    <name>Script File</name>
</value>
                            </entry>
                            <entry>
<key>Script Body</key>
<value>
    <name>Script Body</name>
</value>
                            </entry>
                            <entry>
<key>Module Directory</key>
<value>
    <name>Module Directory</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Script Engine</key>
<value>python</value>
                            </entry>
                            <entry>
<key>Script File</key>
                            </entry>
                            <entry>
<key>Script Body</key>
<value>import json
import re
from datetime import datetime

jython_available = True

try:
    # This is used in the NiFi ExecuteScript context
    import java.io  # noqa
    from org.apache.commons.io import IOUtils
    from java.nio.charset import StandardCharsets
    from org.apache.nifi.processor.io import StreamCallback
except ImportError:
    jython_available = False
    print("Skipping Jython imports")

FINAL_LIST = []
# UNWANTED_CHARACTERS = "-(),.:;'[]?/\|{}?&gt;&lt;!@#$%^&amp;*+ "
# IGNORED_LIST = ["_notes", "_tags", "_attachments", "_geolocation"]

datetime_format_regex = re.compile(r'\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}')
datetimezone_format_regex =\
    re.compile(r'\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d+\W+\d{2}:*\d*')


def remove_special_characters(name):
    name = re.sub(r"[-\\\(\),\.:;'\[\]\?\/\|{}\?&gt;&lt;!@#\$%\^&amp;\*\+ ]", '_', name)
    return name


def underscore_to_slash(x): 
    return x.replace('_', '/')

def slash_to_underscore(x):
    return x.replace('/','_')


def replace_metadata_column_name(k, metadata_details):
    for key in METADATA_DETAILS_KEYS:
        if k == underscore_to_slash(metadata_details["%s_field_name" %key]):
            return key

def flatten_data(data):
    new_dict = {}
    new_list = []

    # metadata_column_names = map(lambda x: underscore_to_slash(x),
    #                             metadata_details.values())
    for k, v in data.items():
        # k = long_field_names.get(slash_to_underscore(k)) or k
        # if isinstance(v, list) and k not in IGNORED_LIST:
        if isinstance(v, list):
            new_list = new_list + v
        # elif k in metadata_column_names:
        #     metadata_type = replace_metadata_column_name(k, metadata_details)
        #     new_dict[metadata_type] = \
        #         reformat_timestamps(v) if isinstance(v, unicode) else v
        # elif k not in IGNORED_LIST:
        else:
            # k = slash_to_underscore(k)
            # k = remove_unwanted_characters(k).lower()
            new_dict[k] = \
                reformat_timestamps(v) if isinstance(v, unicode) else v

    if len(new_list) &gt; 0:
        for i in new_list:
            new_i = {}
            for key, value in i.iteritems():
                # key = slash_to_underscore(key)
                key = remove_special_characters(key).lower()
                new_i[key] = \
                    reformat_timestamps(value) if isinstance(value, unicode) else value
            new_i.update(new_dict)
            if len({k: v for k, v in new_i.iteritems() \
                if isinstance(v, list)}) &gt; 0:
                flatten_data(new_i)
            else:
                FINAL_LIST.append(new_i)
    else:
        FINAL_LIST.append(new_dict)
    return FINAL_LIST


def reformat_timestamps(value):
    formats = ('%d/%m/%Y', '%m/%d/%Y', '%Y/%m/%d')
    timestamps_pattern = re.compile(r'\d+\/\d+\/\d+[\d+\w+\s+:.]*')
    if timestamps_pattern.match(value):
        date_time_list = re.split('T|\s', value)
        date_value = date_time_list[0]
        time_value = ''
        if len(date_time_list) &gt; 1:
            if re.match('\d+:\d+:\d+.\d+', date_time_list[1]):
                time_value = date_time_list[1].split('+')[0]
            elif re.match('\d+:\d+:\d+', date_time_list[1]):
                time_value = date_time_list[1] + '.000'

        for format in formats:
            matched = get_date_format(date_value, format)
            if matched == False:
                get_date_format(date_value, format)
            else:
                new_date = datetime.strptime(date_value, format)
                formatted_data = new_date.strftime('%Y-%m-%d') + ' ' + time_value 
    elif datetimezone_format_regex.match(value):
        formatted_data = value.replace('T', ' ').split('+')[0]
    elif datetime_format_regex.match(value):
        formatted_data = value.replace('T', ' ').decode('utf8') + ".000"
    else:
        formatted_data = value
    return formatted_data

def get_date_format(date_value, format):
    correct_format = False
    try:
        datetime.strptime(date_value, format)
        correct_format = True
    except ValueError:
        correct_format = False
    
    return correct_format


if jython_available:

    class PyStreamCallback(StreamCallback):

        def __init__(self):
            pass

        def process(self, inputStream, outputStream):
            text = IOUtils.toString(inputStream, StandardCharsets.UTF_8)
            obj = json.loads(text)
            flattened_data = flatten_data(obj)

            outputStream.write(bytearray(json.dumps(
                flattened_data, indent=4).encode('utf-8')))

    # session is provided by the NiFi ExecuteScript context
    flowFile = session.get()  # noqa
    if flowFile is not None:
        # metadata_details = json.loads(flowFile.getAttribute(
        #     'metadata_details'))
        # long_field_names_map = json.loads(flowFile.getAttribute(
        #     'long_field_names_map'))

        flowFile = session.write(flowFile, PyStreamCallback())  # noqa
        # REL_SUCCESS is provided by the NiFi ExecuteScript context
        session.transfer(flowFile, REL_SUCCESS)  # noqa
</value>
                            </entry>
                            <entry>
<key>Module Directory</key>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>Flatten JSON</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.script.ExecuteScript</type>
                </processors>
                <processors>
                    <id>d796bfa1-f61f-39ca-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>485.9616415648899</x>
                        <y>1390.3675280398334</y>
                    </position>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>JsonPath Expression</key>
<value>
    <name>JsonPath Expression</name>
</value>
                            </entry>
                            <entry>
<key>Null Value Representation</key>
<value>
    <name>Null Value Representation</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>JsonPath Expression</key>
<value>$.*</value>
                            </entry>
                            <entry>
<key>Null Value Representation</key>
<value>empty string</value>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>SplitJson</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>original</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>split</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.standard.SplitJson</type>
                </processors>
                <processors>
                    <id>e8244832-e8c8-35be-0000-000000000000</id>
                    <parentGroupId>f3ed7560-6a1d-3dbd-0000-000000000000</parentGroupId>
                    <position>
                        <x>1014.9106511775179</x>
                        <y>1381.794252438725</y>
                    </position>
                    <bundle>
                        <artifact>nifi-scripting-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.9.2</version>
                    </bundle>
                    <config>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Script Engine</key>
<value>
    <name>Script Engine</name>
</value>
                            </entry>
                            <entry>
<key>Script File</key>
<value>
    <name>Script File</name>
</value>
                            </entry>
                            <entry>
<key>Script Body</key>
<value>
    <name>Script Body</name>
</value>
                            </entry>
                            <entry>
<key>Module Directory</key>
<value>
    <name>Module Directory</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Script Engine</key>
<value>python</value>
                            </entry>
                            <entry>
<key>Script File</key>
                            </entry>
                            <entry>
<key>Script Body</key>
<value>import json

jython_available = True

try:
    # This is used in the NiFi ExecuteScript context
    import java.io  # noqa
    from org.apache.commons.io import IOUtils
    from java.nio.charset import StandardCharsets
    from org.apache.nifi.processor.io import StreamCallback
except ImportError:
    jython_available = False
    print("Skipping Jython imports")


def format_geotypes(data, geopoints):
    if any(geopoints):
        geopoints_set_intersection = set(data) &amp; set(geopoints)
        for e in geopoints_set_intersection:
            data["_{}_latitude".format(e)] = data[e].split()[0]
            data["_{}_longitude".format(e)] = data[e].split()[1]
            data["_{}_altitude".format(e)] = float(data[e].split(" ")[2])
            data["_{}_accuracy".format(e)] = float(data[e].split(" ")[3])
            del data[e]
    return data


if jython_available:

    class PyStreamCallback(StreamCallback):
        def __init__(self):
            pass

        def process(self, inputStream, outputStream):
            text = IOUtils.toString(inputStream, StandardCharsets.UTF_8)
            obj = json.loads(text)

            data = format_geotypes(obj, GEOPOINTS)
            outputStream.write(
                bytearray(json.dumps(data, indent=4).encode('utf-8')))

    # session is provided by the NiFi ExecuteScript context
    flowFile = session.get()  # noqa
    if flowFile is not None:
        GEOPOINTS = json.loads(flowFile.getAttribute('geopoints'))

        flowFile = session.write(flowFile, PyStreamCallback())  # noqa
        # REL_SUCCESS is provided by the NiFi ExecuteScript context
        session.transfer(flowFile, REL_SUCCESS)  # noqa</value>
                            </entry>
                            <entry>
<key>Module Directory</key>
                            </entry>
                        </properties>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>Format Geotypes</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>failure</name>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                    </relationships>
                    <state>RUNNING</state>
                    <style/>
                    <type>org.apache.nifi.processors.script.ExecuteScript</type>
                </processors>
            </contents>
            <name>Flow Results Processor</name>
            <variables/>
        </processGroups>
    </snippet>
    <timestamp>07/05/2019 16:00:37 UTC</timestamp>
</template>
